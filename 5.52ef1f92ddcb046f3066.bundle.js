/*! For license information please see 5.52ef1f92ddcb046f3066.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{865:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/object-size-small.020f1ec3.svg"},866:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/object-size-medium.29d75eeb.svg"},867:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/object-size-large.2d77fbbf.svg"},868:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/object-size-full.c86395ad.svg"},869:function(module,exports,__webpack_require__){var api=__webpack_require__(24),content=__webpack_require__(870);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},870:function(module,exports,__webpack_require__){(exports=__webpack_require__(23)(!1)).push([module.i,"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck .ck-widget_with-resizer {\n\t/* Make the widget wrapper a relative positioning container for the drag handle. */\n\tposition: relative;\n}\n\n.ck .ck-widget__resizer {\n\tdisplay: none;\n\tposition: absolute;\n\n\t/* The wrapper itself should not interfere with the pointer device, only the handles should. */\n\tpointer-events: none;\n\n\tleft: 0;\n\ttop: 0;\n}\n\n.ck-focused .ck-widget_with-resizer.ck-widget_selected {\n\t& > .ck-widget__resizer {\n\t\tdisplay: block;\n\t}\n}\n\n.ck .ck-widget__resizer__handle {\n\tposition: absolute;\n\n\t/* Resizers are the only UI elements that should interfere with a pointer device. */\n\tpointer-events: all;\n\n\t&.ck-widget__resizer__handle-top-left,\n\t&.ck-widget__resizer__handle-bottom-right {\n\t\tcursor: nwse-resize;\n\t}\n\n\t&.ck-widget__resizer__handle-top-right,\n\t&.ck-widget__resizer__handle-bottom-left {\n\t\tcursor: nesw-resize;\n\t}\n}\n",""]),module.exports=exports},871:function(module,exports,__webpack_require__){var api=__webpack_require__(24),content=__webpack_require__(872);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},872:function(module,exports,__webpack_require__){(exports=__webpack_require__(23)(!1)).push([module.i,'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck-content .image.image_resized {\n\tmax-width: 100%;\n\t/*\n\tThe `<figure>` element for resized images must not use `display:table` as browsers do not support `max-width` for it well.\n\tSee https://stackoverflow.com/questions/4019604/chrome-safari-ignoring-max-width-in-table/14420691#14420691 for more.\n\tFortunately, since we control the width, there is no risk that the image will look bad.\n\t*/\n\tdisplay: block;\n\tbox-sizing: border-box;\n\n\t& img {\n\t\t/* For resized images it is the `<figure>` element that determines the image width. */\n\t\twidth: 100%;\n\t}\n\n\t& > figcaption {\n\t\t/* The `<figure>` element uses `display:block`, so `<figcaption>` also has to. */\n\t\tdisplay: block;\n\t}\n}\n\n[dir="ltr"] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon {\n\tmargin-right: var(--ck-spacing-standard);\n}\n\n[dir="rtl"] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon {\n\tmargin-left: var(--ck-spacing-standard);\n}\n\n.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label {\n\twidth: 4em;\n}\n',""]),module.exports=exports},875:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return imageresize_ImageResize}));var src_plugin=__webpack_require__(738),buttonview=__webpack_require__(750),src_command=__webpack_require__(774),utils=__webpack_require__(748);class imageresizecommand_ImageResizeCommand extends src_command.a{refresh(){const element=this.editor.model.document.selection.getSelectedElement();this.isEnabled=Object(utils.d)(element),element&&element.hasAttribute("width")?this.value={width:element.getAttribute("width"),height:null}:this.value=null}execute(options){const model=this.editor.model,imageElement=model.document.selection.getSelectedElement();this.value={width:options.width,height:null},imageElement&&model.change(writer=>{writer.setAttribute("width",options.width,imageElement)})}}class imageresizeediting_ImageResizeEditing extends src_plugin.a{static get pluginName(){return"ImageResizeEditing"}constructor(editor){super(editor),editor.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"imageResize:original",value:null,icon:"original"},{name:"imageResize:25",value:"25",icon:"small"},{name:"imageResize:50",value:"50",icon:"medium"},{name:"imageResize:75",value:"75",icon:"large"}]})}init(){const editor=this.editor,command=new imageresizecommand_ImageResizeCommand(editor);this._registerSchema(),this._registerConverters(),editor.commands.add("imageResize",command)}_registerSchema(){this.editor.model.schema.extend("image",{allowAttributes:"width"}),this.editor.model.schema.setAttributeProperties("width",{isFormatting:!0})}_registerConverters(){const editor=this.editor;editor.conversion.for("downcast").add(dispatcher=>dispatcher.on("attribute:width:image",(evt,data,conversionApi)=>{if(!conversionApi.consumable.consume(data.item,evt.name))return;const viewWriter=conversionApi.writer,figure=conversionApi.mapper.toViewElement(data.item);null!==data.attributeNewValue?(viewWriter.setStyle("width",data.attributeNewValue,figure),viewWriter.addClass("image_resized",figure)):(viewWriter.removeStyle("width",figure),viewWriter.removeClass("image_resized",figure))})),editor.conversion.for("upcast").attributeToAttribute({view:{name:"figure",styles:{width:/.+/}},model:{key:"width",value:viewElement=>viewElement.getStyle("width")}})}}var dropdown_utils=__webpack_require__(803),dropdownbuttonview=__webpack_require__(801),mix=__webpack_require__(740),observablemixin=__webpack_require__(744),assignIn=__webpack_require__(876);class model_Model{constructor(attributes,properties){properties&&Object(assignIn.a)(this,properties),attributes&&this.set(attributes)}}Object(mix.a)(model_Model,observablemixin.a);var collection=__webpack_require__(770),ckeditorerror=__webpack_require__(739),object_size_small=__webpack_require__(865),object_size_small_default=__webpack_require__.n(object_size_small),object_size_medium=__webpack_require__(866),object_size_medium_default=__webpack_require__.n(object_size_medium),object_size_large=__webpack_require__(867),object_size_large_default=__webpack_require__.n(object_size_large),object_size_full=__webpack_require__(868),object_size_full_default=__webpack_require__.n(object_size_full);const RESIZE_ICONS={small:object_size_small_default.a,medium:object_size_medium_default.a,large:object_size_large_default.a,original:object_size_full_default.a};class imageresizebuttons_ImageResizeButtons extends src_plugin.a{static get requires(){return[imageresizeediting_ImageResizeEditing]}static get pluginName(){return"ImageResizeButtons"}constructor(editor){super(editor),this._resizeUnit=editor.config.get("image.resizeUnit")}init(){const editor=this.editor,options=editor.config.get("image.resizeOptions"),command=editor.commands.get("imageResize");this.bind("isEnabled").to(command);for(const option of options)this._registerImageResizeButton(option);this._registerImageResizeDropdown(options)}_registerImageResizeButton(option){const editor=this.editor,{name:name,value:value,icon:icon}=option,optionValueWithUnit=value?value+this._resizeUnit:null;editor.ui.componentFactory.add(name,locale=>{const button=new buttonview.a(locale),command=editor.commands.get("imageResize"),labelText=this._getOptionLabelValue(option,!0);if(!RESIZE_ICONS[icon])throw new ckeditorerror.a("imageresizebuttons-missing-icon",editor,option);return button.set({label:labelText,icon:RESIZE_ICONS[icon],tooltip:labelText,isToggleable:!0}),button.bind("isEnabled").to(this),button.bind("isOn").to(command,"value",getIsOnButtonCallback(optionValueWithUnit)),this.listenTo(button,"execute",()=>{editor.execute("imageResize",{width:optionValueWithUnit})}),button})}_registerImageResizeDropdown(options){const editor=this.editor,t=editor.t,originalSizeOption=options.find(option=>!option.value);editor.ui.componentFactory.add("imageResize",locale=>{const command=editor.commands.get("imageResize"),dropdownView=Object(dropdown_utils.c)(locale,dropdownbuttonview.a),dropdownButton=dropdownView.buttonView;return dropdownButton.set({tooltip:t("Resize image"),commandValue:originalSizeOption.value,icon:object_size_medium_default.a,isToggleable:!0,label:this._getOptionLabelValue(originalSizeOption),withText:!0,class:"ck-resize-image-button"}),dropdownButton.bind("label").to(command,"value",commandValue=>commandValue&&commandValue.width?commandValue.width:this._getOptionLabelValue(originalSizeOption)),dropdownView.bind("isOn").to(command),dropdownView.bind("isEnabled").to(this),Object(dropdown_utils.a)(dropdownView,this._getResizeDropdownListItemDefinitions(options,command)),dropdownView.listView.ariaLabel=t("Image resize list"),this.listenTo(dropdownView,"execute",evt=>{editor.execute(evt.source.commandName,{width:evt.source.commandValue}),editor.editing.view.focus()}),dropdownView})}_getOptionLabelValue(option,forTooltip){const t=this.editor.t;return option.label?option.label:forTooltip?option.value?t("Resize image to %0",option.value+this._resizeUnit):t("Resize image to the original size"):option.value?option.value+this._resizeUnit:t("Original")}_getResizeDropdownListItemDefinitions(options,command){const itemDefinitions=new collection.a;return options.map(option=>{const optionValueWithUnit=option.value?option.value+this._resizeUnit:null,definition={type:"button",model:new model_Model({commandName:"imageResize",commandValue:optionValueWithUnit,label:this._getOptionLabelValue(option),withText:!0,icon:null})};definition.model.bind("isOn").to(command,"value",getIsOnButtonCallback(optionValueWithUnit)),itemDefinitions.add(definition)}),itemDefinitions}}function getIsOnButtonCallback(value){return commandValue=>null===value&&commandValue===value||commandValue&&commandValue.width===value}var view=__webpack_require__(737),template=__webpack_require__(778),rect=__webpack_require__(747);class resizerstate_ResizeState{constructor(options){this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=options,this._referenceCoordinates=null}begin(domResizeHandle,domHandleHost,domResizeHost){const clientRect=new rect.a(domHandleHost);this.activeHandlePosition=function getHandlePosition(domHandle){const resizerPositions=["top-left","top-right","bottom-right","bottom-left"];for(const position of resizerPositions)if(domHandle.classList.contains("ck-widget__resizer__handle-"+position))return position}(domResizeHandle),this._referenceCoordinates=function getAbsoluteBoundaryPoint(element,resizerPosition){const elementRect=new rect.a(element),positionParts=resizerPosition.split("-"),ret={x:"right"==positionParts[1]?elementRect.right:elementRect.left,y:"bottom"==positionParts[0]?elementRect.bottom:elementRect.top};return ret.x+=element.ownerDocument.defaultView.scrollX,ret.y+=element.ownerDocument.defaultView.scrollY,ret}(domHandleHost,function getOppositePosition(position){const parts=position.split("-"),replacements={top:"bottom",bottom:"top",left:"right",right:"left"};return`${replacements[parts[0]]}-${replacements[parts[1]]}`}(this.activeHandlePosition)),this.originalWidth=clientRect.width,this.originalHeight=clientRect.height,this.aspectRatio=clientRect.width/clientRect.height;const widthStyle=domResizeHost.style.width;widthStyle&&widthStyle.match(/^\d+\.?\d*%$/)?this.originalWidthPercents=parseFloat(widthStyle):this.originalWidthPercents=function calculateHostPercentageWidth(domResizeHost,resizeHostRect){const domResizeHostParent=domResizeHost.parentElement,parentWidth=parseFloat(domResizeHostParent.ownerDocument.defaultView.getComputedStyle(domResizeHostParent).width);return resizeHostRect.width/parentWidth*100}(domResizeHost,clientRect)}update(newSize){this.proposedWidth=newSize.width,this.proposedHeight=newSize.height,this.proposedWidthPercents=newSize.widthPercents,this.proposedHandleHostWidth=newSize.handleHostWidth,this.proposedHandleHostHeight=newSize.handleHostHeight}}Object(mix.a)(resizerstate_ResizeState,observablemixin.a);class resizer_Resizer{constructor(options){this._options=options,this._domResizerWrapper=null,this._viewResizerWrapper=null,this.set("isEnabled",!0),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",event=>{this.state.proposedWidth||this.state.proposedWidthPercents||(this._cleanup(),event.stop())},{priority:"high"}),this.on("change:isEnabled",()=>{this.isEnabled&&this.redraw()})}attach(){const that=this,widgetElement=this._options.viewElement;this._options.editor.editing.view.change(writer=>{const viewResizerWrapper=writer.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},(function(domDocument){const domElement=this.toDomElement(domDocument);return that._appendHandles(domElement),that._appendSizeUI(domElement),that._domResizerWrapper=domElement,that.on("change:isEnabled",(evt,propName,newValue)=>{domElement.style.display=newValue?"":"none"}),domElement.style.display=that.isEnabled?"":"none",domElement}));writer.insert(writer.createPositionAt(widgetElement,"end"),viewResizerWrapper),writer.addClass("ck-widget_with-resizer",widgetElement),this._viewResizerWrapper=viewResizerWrapper})}begin(domResizeHandle){this.state=new resizerstate_ResizeState(this._options),this._sizeUI.bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(domResizeHandle,this._getHandleHost(),this._getResizeHost())}updateSize(domEventData){const newSize=this._proposeNewSize(domEventData);this._options.editor.editing.view.change(writer=>{const unit=this._options.unit||"%",newWidth=("%"===unit?newSize.widthPercents:newSize.width)+unit;writer.setStyle("width",newWidth,this._options.viewElement)});const domHandleHost=this._getHandleHost(),domHandleHostRect=new rect.a(domHandleHost);newSize.handleHostWidth=Math.round(domHandleHostRect.width),newSize.handleHostHeight=Math.round(domHandleHostRect.height);const domResizeHostRect=new rect.a(domHandleHost);newSize.width=Math.round(domResizeHostRect.width),newSize.height=Math.round(domResizeHostRect.height),this.redraw(domHandleHostRect),this.state.update(newSize)}commit(){const unit=this._options.unit||"%",newValue=("%"===unit?this.state.proposedWidthPercents:this.state.proposedWidth)+unit;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(newValue)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(handleHostRect){const domWrapper=this._domResizerWrapper;if(!function existsInDom(element){return element&&element.ownerDocument&&element.ownerDocument.contains(element)}(domWrapper))return;const widgetWrapper=domWrapper.parentElement,handleHost=this._getHandleHost(),resizerWrapper=this._viewResizerWrapper,currentDimensions=[resizerWrapper.getStyle("width"),resizerWrapper.getStyle("height"),resizerWrapper.getStyle("left"),resizerWrapper.getStyle("top")];let newDimensions;if(widgetWrapper.isSameNode(handleHost)){const clientRect=handleHostRect||new rect.a(handleHost);newDimensions=[clientRect.width+"px",clientRect.height+"px",void 0,void 0]}else newDimensions=[handleHost.offsetWidth+"px",handleHost.offsetHeight+"px",handleHost.offsetLeft+"px",handleHost.offsetTop+"px"];"same"!==function compareArrays(a,b){const minLen=Math.min(a.length,b.length);for(let i=0;i<minLen;i++)if(a[i]!=b[i])return i;return a.length==b.length?"same":a.length<b.length?"prefix":"extension"}(currentDimensions,newDimensions)&&this._options.editor.editing.view.change(writer=>{writer.setStyle({width:newDimensions[0],height:newDimensions[1],left:newDimensions[2],top:newDimensions[3]},resizerWrapper)})}containsHandle(domElement){return this._domResizerWrapper.contains(domElement)}static isResizeHandle(domElement){return domElement.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeUI.dismiss(),this._sizeUI.isVisible=!1;this._options.editor.editing.view.change(writer=>{writer.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(domEventData){const state=this.state,currentCoordinates=function extractCoordinates(event){return{x:event.pageX,y:event.pageY}}(domEventData),isCentered=!this._options.isCentered||this._options.isCentered(this),enlargement={x:state._referenceCoordinates.x-(currentCoordinates.x+state.originalWidth),y:currentCoordinates.y-state.originalHeight-state._referenceCoordinates.y};isCentered&&state.activeHandlePosition.endsWith("-right")&&(enlargement.x=currentCoordinates.x-(state._referenceCoordinates.x+state.originalWidth)),isCentered&&(enlargement.x*=2);const proposedSize={width:Math.abs(state.originalWidth+enlargement.x),height:Math.abs(state.originalHeight+enlargement.y)};proposedSize.dominant=proposedSize.width/state.aspectRatio>proposedSize.height?"width":"height",proposedSize.max=proposedSize[proposedSize.dominant];const targetSize={width:proposedSize.width,height:proposedSize.height};return"width"==proposedSize.dominant?targetSize.height=targetSize.width/state.aspectRatio:targetSize.width=targetSize.height*state.aspectRatio,{width:Math.round(targetSize.width),height:Math.round(targetSize.height),widthPercents:Math.min(Math.round(state.originalWidthPercents/state.originalWidth*targetSize.width*100)/100,100)}}_getResizeHost(){const widgetWrapper=this._domResizerWrapper.parentElement;return this._options.getResizeHost(widgetWrapper)}_getHandleHost(){const widgetWrapper=this._domResizerWrapper.parentElement;return this._options.getHandleHost(widgetWrapper)}_appendHandles(domElement){const resizerPositions=["top-left","top-right","bottom-right","bottom-left"];for(const currentPosition of resizerPositions)domElement.appendChild(new template.a({tag:"div",attributes:{class:"ck-widget__resizer__handle "+(resizerPosition=currentPosition,"ck-widget__resizer__handle-"+resizerPosition)}}).render());var resizerPosition}_appendSizeUI(domElement){const sizeUI=new resizer_SizeView;sizeUI.render(),this._sizeUI=sizeUI,domElement.appendChild(sizeUI.element)}}Object(mix.a)(resizer_Resizer,observablemixin.a);class resizer_SizeView extends view.a{constructor(){super();const bind=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",bind.to("activeHandlePosition",value=>value?"ck-orientation-"+value:"")],style:{display:bind.if("isVisible","none",visible=>!visible)}},children:[{text:bind.to("label")}]})}bindToState(options,resizerState){this.bind("isVisible").to(resizerState,"proposedWidth",resizerState,"proposedHeight",(width,height)=>null!==width&&null!==height),this.bind("label").to(resizerState,"proposedHandleHostWidth",resizerState,"proposedHandleHostHeight",resizerState,"proposedWidthPercents",(width,height,widthPercents)=>"px"===options.unit?`${width}Ã—${height}`:widthPercents+"%"),this.bind("activeHandlePosition").to(resizerState)}dismiss(){this.unbind(),this.isVisible=!1}}var emittermixin=__webpack_require__(752),global=__webpack_require__(746),mouseobserver=__webpack_require__(805),isObject=__webpack_require__(742),_root=__webpack_require__(741),lodash_es_now=function(){return _root.a.Date.now()},reWhitespace=/\s/;var _trimmedEndIndex=function trimmedEndIndex(string){for(var index=string.length;index--&&reWhitespace.test(string.charAt(index)););return index},reTrimStart=/^\s+/;var _baseTrim=function baseTrim(string){return string?string.slice(0,_trimmedEndIndex(string)+1).replace(reTrimStart,""):string},_baseGetTag=__webpack_require__(754),isObjectLike=__webpack_require__(745);var lodash_es_isSymbol=function isSymbol(value){return"symbol"==typeof value||Object(isObjectLike.a)(value)&&"[object Symbol]"==Object(_baseGetTag.a)(value)},reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;var lodash_es_toNumber=function toNumber(value){if("number"==typeof value)return value;if(lodash_es_isSymbol(value))return NaN;if(Object(isObject.a)(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=Object(isObject.a)(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=_baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NaN:+value},nativeMax=Math.max,nativeMin=Math.min;var lodash_es_debounce=function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=lodash_es_now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function remainingWait(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=lodash_es_now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return leadingEdge(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=lodash_es_toNumber(wait)||0,Object(isObject.a)(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(lodash_es_toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function flush(){return void 0===timerId?result:trailingEdge(lodash_es_now())},debounced};var lodash_es_throttle=function throttle(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");return Object(isObject.a)(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),lodash_es_debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})};__webpack_require__(869);class widgetresize_WidgetResize extends src_plugin.a{static get pluginName(){return"WidgetResize"}init(){this.set("visibleResizer",null),this.set("_activeResizer",null),this._resizers=new Map;const domDocument=global.a.window.document;this.editor.model.schema.setAttributeProperties("width",{isFormatting:!0}),this.editor.editing.view.addObserver(mouseobserver.a),this._observer=Object.create(emittermixin.a),this.listenTo(this.editor.editing.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(domDocument,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(domDocument,"mouseup",this._mouseUpListener.bind(this));const redrawFocusedResizer=()=>{this.visibleResizer&&this.visibleResizer.redraw()},redrawFocusedResizerThrottled=lodash_es_throttle(redrawFocusedResizer,200);this.on("change:visibleResizer",redrawFocusedResizer),this.editor.ui.on("update",redrawFocusedResizerThrottled),this._observer.listenTo(global.a.window,"resize",redrawFocusedResizerThrottled);const viewSelection=this.editor.editing.view.document.selection;viewSelection.on("change",()=>{const selectedElement=viewSelection.getSelectedElement();this.visibleResizer=this.getResizerByViewElement(selectedElement)||null})}destroy(){this._observer.stopListening();for(const resizer of this._resizers.values())resizer.destroy()}attachTo(options){const resizer=new resizer_Resizer(options),plugins=this.editor.plugins;if(resizer.attach(),plugins.has("WidgetToolbarRepository")){const widgetToolbarRepository=plugins.get("WidgetToolbarRepository");resizer.on("begin",()=>{widgetToolbarRepository.forceDisabled("resize")},{priority:"lowest"}),resizer.on("cancel",()=>{widgetToolbarRepository.clearForceDisabled("resize")},{priority:"highest"}),resizer.on("commit",()=>{widgetToolbarRepository.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(options.viewElement,resizer);const selectedElement=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(selectedElement)==resizer&&(this.visibleResizer=resizer),resizer}getResizerByViewElement(viewElement){return this._resizers.get(viewElement)}_getResizerByHandle(domResizeHandle){for(const resizer of this._resizers.values())if(resizer.containsHandle(domResizeHandle))return resizer}_mouseDownListener(event,domEventData){const resizeHandle=domEventData.domTarget;resizer_Resizer.isResizeHandle(resizeHandle)&&(this._activeResizer=this._getResizerByHandle(resizeHandle),this._activeResizer&&(this._activeResizer.begin(resizeHandle),event.stop(),domEventData.preventDefault()))}_mouseMoveListener(event,domEventData){this._activeResizer&&this._activeResizer.updateSize(domEventData)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}Object(mix.a)(widgetresize_WidgetResize,observablemixin.a);var imageloadobserver=__webpack_require__(789);class imageresizehandles_ImageResizeHandles extends src_plugin.a{static get requires(){return[widgetresize_WidgetResize]}static get pluginName(){return"ImageResizeHandles"}init(){const command=this.editor.commands.get("imageResize");this.bind("isEnabled").to(command),this._setupResizerCreator()}_setupResizerCreator(){const editor=this.editor,editingView=editor.editing.view;editingView.addObserver(imageloadobserver.a),this.listenTo(editingView.document,"imageLoaded",(evt,domEvent)=>{if(!domEvent.target.matches("figure.image.ck-widget > img, figure.image.ck-widget > a > img"))return;const widgetView=editor.editing.view.domConverter.domToView(domEvent.target).findAncestor("figure");let resizer=this.editor.plugins.get(widgetresize_WidgetResize).getResizerByViewElement(widgetView);if(resizer)return void resizer.redraw();const imageModel=editor.editing.mapper.toModelElement(widgetView);resizer=editor.plugins.get(widgetresize_WidgetResize).attachTo({unit:editor.config.get("image.resizeUnit"),modelElement:imageModel,viewElement:widgetView,editor:editor,getHandleHost:domWidgetElement=>domWidgetElement.querySelector("img"),getResizeHost:domWidgetElement=>domWidgetElement,isCentered(){const imageStyle=imageModel.getAttribute("imageStyle");return!imageStyle||"full"==imageStyle||"alignCenter"==imageStyle},onCommit(newValue){editor.execute("imageResize",{width:newValue})}}),resizer.on("updateSize",()=>{widgetView.hasClass("image_resized")||editingView.change(writer=>{writer.addClass("image_resized",widgetView)})}),resizer.bind("isEnabled").to(this)})}}__webpack_require__(871);class imageresize_ImageResize extends src_plugin.a{static get requires(){return[imageresizeediting_ImageResizeEditing,imageresizehandles_ImageResizeHandles,imageresizebuttons_ImageResizeButtons]}static get pluginName(){return"ImageResize"}}}}]);
//# sourceMappingURL=5.52ef1f92ddcb046f3066.bundle.js.map