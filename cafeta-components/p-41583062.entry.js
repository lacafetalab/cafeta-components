import{r as i,c as t,h as e,H as s}from"./p-0f7a02be.js";const l=class{constructor(e){i(this,e),this.changeChoice=t(this,"changeChoice",7),this._choices=[],this.isOpenDropdown=!1,this.thereIsLowerSpace=!1,this.positionOptionstop=!1,this.valueInput="",this.selectedChoices=[],this.hoveredChoice="",this.label="",this.error=!1,this.disabled=!1,this.fieldReadonly=!1,this.placeholder="",this.name="",this.currentValue="",this.iconName="chevron-down",this.color="primary",this.border=!0,this.bgField="",this.loader=!1,this.IconRotate=!0,this.updateChoicesList=i=>{this.selectedChoices=this.selectedChoices.includes(i)?this.selectedChoices.filter(t=>t!==i):[...this.selectedChoices,i],this.changeChoice.emit(this.selectedChoices)},this.setInputText=i=>{this.valueInput=i.target.value,this.valueInput.length&&this.handleShowOptions()},this.focusInput=()=>{this.isOpenDropdown&&this.inputEl.focus()},this.removeFocus=()=>{this.isOpenDropdown||this.inputEl.blur()},this.clearInputValue=()=>{this.valueInput=""},this.knowIfThereIsASelected=()=>this.selectedChoices.length>0,this.handleOptionClick=i=>{this.updateChoicesList(i),this.clearInputValue(),this.focusInput()},this.filteredChoices=()=>this.valueInput.length?this._choices.filter(i=>{const t=i.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),e=this.valueInput.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return t.includes(e)}):this._choices,this.placeholderSelected=()=>{this.clearChoices(),this.handleHideOptions(),this.changeChoice.emit(null)},this.handleShowOptions=()=>{this.isOpenDropdown=!0,this.hoveredChoice=this._choices[0].value},this.handleHideOptions=()=>{this.isOpenDropdown=!1},this.handleRemoveItemSelected=i=>{this.updateChoicesList(i),this.focusInput()},this.closeDroprownIfClickOutDropdown=i=>{if(!this.singleFileInput.contains(i.target))return this.removeFocus(),this.handleHideOptions(),this.clearInputValue()},this.getHeigthWrapperOptions=()=>this.dropdownItems.getBoundingClientRect().height,this.observerListItems=()=>{this.observerItems=new MutationObserver(i=>{i.forEach(i=>{"attributes"===i.type&&(this.calculatePositionOfOptions(),this.focusInput(),this.removeFocus())})}),this.observerItems.observe(this.dropdownItems,{attributes:!0,childList:!1,characterData:!1})},this.calculatePositionOfOptions=()=>{if(this.isOpenDropdown){const i=this.singleFileInput,t=this.dropdownItems,e=document.body.getBoundingClientRect().height,s=t.getBoundingClientRect().height,l=i.getBoundingClientRect().height,n=i.getBoundingClientRect().top;return this.positionOptionstop=e<n+l+8+s}this.positionOptionstop=!1},this.validateDisabled=()=>{this.disabled||this.handleShowOptions()}}setChoices(i,t){JSON.stringify(i)!==JSON.stringify(t)&&(this._choices=i,this.selectedChoices=this._choices.filter(i=>i.selected).map(i=>i.value))}handleKeyDown(i){if(this.isOpenDropdown){const t=this._choices.findIndex(i=>i.value===this.hoveredChoice),e=(i,t)=>{i.scrollIntoViewIfNeeded(t)},s=i=>this._choices.findIndex(t=>t.value===i),l=this._choices.find((i,e)=>e>t&&!i.disabled),n=this._choices.filter((i,e)=>e<t&&!i.disabled).pop();switch(i.key){case"ArrowDown":l&&(this.hoveredChoice=l.value,e(this.dropdownItems.querySelectorAll(".filter-file-input__option")[s(l.value)],!1));break;case"ArrowUp":n&&(this.hoveredChoice=n.value,e(this.dropdownItems.querySelectorAll(".filter-file-input__option")[s(n.value)],!0));break;case"Enter":this.handleOptionClick(this.hoveredChoice);break;case"Backspace":if(!this.valueInput.length&&this.selectedChoices.length){const i=[...this.selectedChoices],t=i.pop(),e=this._choices.find(i=>i.value===t);(null==e?void 0:e.disableRemove)||(this.selectedChoices=i)}}}}clearChoices(){const i=[...this._choices];i.map(i=>i.selected=!1),this._choices=i}validateShowPlaceholder(){return this.isOpenDropdown||this.knowIfThereIsASelected()}handleToogleOptions(){this.isOpenDropdown=!this.isOpenDropdown,this.calculatePositionOfOptions()}componentWillLoad(){this._choices=[...this.choices],this.selectedChoices=this._choices.filter(i=>i.selected).map(i=>i.value),document.addEventListener("click",this.closeDroprownIfClickOutDropdown)}componentDidLoad(){this.observerListItems()}componentDidUnload(){this.observerItems&&this.observerItems.disconnect(),document.removeEventListener("click",this.closeDroprownIfClickOutDropdown)}render(){const i={disabled:this.disabled,loader:this.loader,fieldReadonly:this.fieldReadonly,color:this.color,error:this.error,border:this.border,bgField:this.bgField,isActive:this.isOpenDropdown,iconRotate:this.IconRotate,iconName:this.iconName,helperText:this.helperText};return e(s,{"data-testid":"cc-filter-file-input",class:"filter-file-input"},this.label&&e("span",{class:"filter-file-input__label"},this.label),e("cc-wrapper-field",Object.assign({ref:i=>this.singleFileInput=i,class:{"filter-file-input__wrapper":!0,"filter-file-input--is-collapse":this.isOpenDropdown}},i),e("div",{class:"filter-file-input__field",onClick:this.validateDisabled},e("div",{class:{"filter-file-input__dot-wrapper":!0,"filter-file-input__dot-wrapper--is-hidden":!this.knowIfThereIsASelected()}},e("ul",{class:"filter-file-input__dot-list"},this.selectedChoices.map(i=>this._choices.find(t=>t.value===i)).map(i=>e("li",{class:"filter-file-input__dot-item"},e("div",{class:"filter-file-input__dot-text"},i.label,e("div",{onClick:()=>i.disableRemove?null:this.handleRemoveItemSelected(i.value),class:"filter-file-input__dot-delete"},e("cc-icon",{size:12,name:"x"}))))))),e("p",{class:{"filter-file-input__placeholder":!0,"filter-file-input__placeholder--is-hidden":this.validateShowPlaceholder()}},this.placeholder),e("cc-input",{style:{width:this.valueInput.length+1+"ch",maxWidth:"100%"},bgField:"bg-transparent",onInput:i=>this.setInputText(i),border:!1,value:this.valueInput,inputRef:i=>this.inputEl=i,class:{"filter-file-input__input":!0,"filter-file-input__input--is-hidden":!this.validateShowPlaceholder()}})),e("ul",{ref:i=>this.dropdownItems=i,class:{"filter-file-input__options":!0,"filter-file-input__options--is-active":this.isOpenDropdown,"filter-file-input__options--top":this.positionOptionstop}},0===this.filteredChoices().length&&e("li",{class:{"filter-file-input__placeholder":!0,"filter-file-input__option":!0}},"No se encontraron resultados"),this.filteredChoices().map(i=>Object.assign(Object.assign({},i),{selected:this.selectedChoices.includes(i.value)})).map(i=>e("li",{onClick:()=>i.disabled||i.disableRemove?null:this.handleOptionClick(i.value),class:{"filter-file-input__option":!0,"filter-file-input__option--is-selected":i.selected,"filter-file-input__option--is-disabled":i.disabled,"filter-file-input__option--hover":i.value===this.hoveredChoice}},"checkbox"===this.type&&e("cc-checkfield",{class:"filter-file-input__option-checkbox",type:"checkbox",shape:"square",color:this.color,checked:i.selected}),e("span",null,i.label))))))}static get watchers(){return{choices:["setChoices"]}}};l.style="*{-webkit-box-sizing:border-box;box-sizing:border-box}.filter-file-input__field{padding-top:0.8rem;padding-bottom:0.8rem;padding-left:1.6rem;padding-right:1.6rem;padding-right:40px;min-height:40px}.filter-file-input__field-option{margin:0;padding:0;display:none;visibility:hidden;color:var(--neutral-03);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.filter-file-input__field-option--is-selected{display:block;visibility:visible}.filter-file-input__placeholder{color:var(--neutral-02);display:block;visibility:visible;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.filter-file-input__placeholder--is-hidden{display:none;visibility:hidden}.filter-file-input__options{position:absolute;width:100%;background-color:var(--neutral-04);border-radius:0.4rem;overflow:auto;padding:0;margin:0;left:0;top:calc(100% + 8px);-webkit-box-shadow:0 4px 16px -8px rgba(0, 0, 0, 0.5);box-shadow:0 4px 16px -8px rgba(0, 0, 0, 0.5);max-height:208px;display:none;z-index:1}.filter-file-input__options--is-active{display:block}.filter-file-input__options--top{bottom:calc(100% + 8px);top:auto}.filter-file-input__option{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;min-height:40px;font-size:14px;line-height:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:10px 1.6rem}.filter-file-input__option:hover,.filter-file-input__option--hover{background-color:var(--background-01)}.filter-file-input__option--is-selected{background-color:var(--background-02);color:var(--neutral-03);font-weight:700;-webkit-transition-property:all;transition-property:all}.filter-file-input__option--is-selected:hover{background-color:var(--background-02)}.filter-file-input__option--is-disabled{color:var(--disabled-text)}.filter-file-input__option--is-disabled:hover{cursor:not-allowed;background:transparent}.filter-file-input__option-checkbox{margin-right:1.6rem}.filter-file-input__label{padding-top:0.4rem;padding-bottom:0.4rem;font-size:1.1rem;font-weight:900;color:var(--neutral-03);display:block}.filter-file-input__input--is-hidden{visibility:hidden;position:absolute;z-index:-2}.filter-file-input__dot-wrapper{display:inline-block}.filter-file-input__dot-wrapper--is-hidden{display:none}.filter-file-input__dot-list{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:-4px}.filter-file-input__dot-item{background-color:var(--background-01);display:-ms-flexbox;display:flex;-ms-flex-align:end;align-items:flex-end;border-radius:10px;padding:0.2rem 0.8rem 0.2rem 1.2rem;margin:4px}.filter-file-input__dot-text{font-size:1.1rem;vertical-align:middle}.filter-file-input__dot-delete{display:-ms-inline-flexbox;display:inline-flex;margin-left:0.8rem;vertical-align:text-bottom}.filter-file-input__dot-delete cc-icon{display:-ms-inline-flexbox;display:inline-flex;color:inherit}.filter-file-input__icon--inverted{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.filter-file-input cc-input{display:inline-block}.filter-file-input cc-input .input__field{padding:0}";export{l as cc_filter_select_input}