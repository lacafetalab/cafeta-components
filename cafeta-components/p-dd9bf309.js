/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
class t{constructor(t,e){this.source=t,this.name=e,this.path=[],this.stop=function t(){t.called=!0},this.off=function t(){t.called=!0}}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const e=new Array(256).fill().map((t,e)=>("0"+e.toString(16)).slice(-2));function n(){const t=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,s=4294967296*Math.random()>>>0;return"e"+e[t>>0&255]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+e[n>>0&255]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]+e[i>>0&255]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]+e[s>>0&255]+e[s>>8&255]+e[s>>16&255]+e[s>>24&255]}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const i={get(t){return"number"!=typeof t?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class s extends Error{constructor(t,e,n){super(`${t}${n?" "+JSON.stringify(n):""}${function(t){return"\nRead more: https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html#error-"+t}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(t)}`),this.name="CKEditorError",this.context=e,this.data=n}is(t){return"CKEditorError"===t}static rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError"))throw t;const n=new s(t.message,e);throw n.stack=t.stack,n}}const r="object"==typeof window?window:global;if(r.CKEDITOR_VERSION)throw new s("ckeditor-duplicated-modules",null);
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */r.CKEDITOR_VERSION="25.0.0";const o=Symbol("listeningTo"),c=Symbol("emitterId"),h={on(t,e,n={}){this.listenTo(this,t,e,n)},once(t,e,n){let i=!1;this.listenTo(this,t,(function(t,...n){i||(i=!0,t.off(),e.call(this,t,...n))}),n)},off(t,e){this.stopListening(this,t,e)},listenTo(t,e,n,s={}){let r,c;this[o]||(this[o]={});const h=this[o];a(t)||u(t);const d=a(t);(r=h[d])||(r=h[d]={emitter:t,callbacks:{}}),(c=r.callbacks[e])||(c=r.callbacks[e]=[]),c.push(n),function(t,e){const n=l(t);if(n[e])return;let i=e,s=null;const r=[];for(;""!==i&&!n[i];)n[i]={callbacks:[],childEvents:[]},r.push(n[i]),s&&n[i].childEvents.push(s),s=i,i=i.substr(0,i.lastIndexOf(":"));if(""!==i){for(const t of r)t.callbacks=n[i].callbacks.slice();n[i].childEvents.push(s)}}(t,e);const b=f(t,e),w=i.get(s.priority),p={callback:n,priority:w};for(const i of b){let t=!1;for(let e=0;e<i.length;e++)if(i[e].priority<w){i.splice(e,0,p),t=!0;break}t||i.push(p)}},stopListening(t,e,n){const i=this[o];let s=t&&a(t);const r=i&&s&&i[s],c=r&&e&&r.callbacks[e];if(!(!i||t&&!r||e&&!c))if(n)b(t,e,n),-1!==c.indexOf(n)&&(1===c.length?delete r.callbacks[e]:b(t,e,n));else if(c){for(;n=c.pop();)b(t,e,n);delete r.callbacks[e]}else if(r){for(e in r.callbacks)this.stopListening(t,e);delete i[s]}else{for(s in i)this.stopListening(i[s].emitter);delete this[o]}},fire(e,...n){try{const i=e instanceof t?e:new t(this,e),s=i.name;let r=function t(e,n){let i;return e._events&&(i=e._events[n])&&i.callbacks.length?i.callbacks:n.indexOf(":")>-1?t(e,n.substr(0,n.lastIndexOf(":"))):null}(this,s);if(i.path.push(this),r){const t=[i,...n];r=Array.from(r);for(let e=0;e<r.length&&(r[e].callback.apply(this,t),i.off.called&&(delete i.off.called,b(this,s,r[e].callback)),!i.stop.called);e++);}if(this._delegations){const t=this._delegations.get(s),e=this._delegations.get("*");t&&d(t,i,n),e&&d(e,i,n)}return i.return}catch(i){s.rethrowUnexpectedError(i,this)}},delegate(...t){return{to:(e,n)=>{this._delegations||(this._delegations=new Map),t.forEach(t=>{const i=this._delegations.get(t);i?i.set(e,n):this._delegations.set(t,new Map([[e,n]]))})}}},stopDelegating(t,e){if(this._delegations)if(t)if(e){const n=this._delegations.get(t);n&&n.delete(e)}else this._delegations.delete(t);else this._delegations.clear()}};function u(t,e){t[c]||(t[c]=e||n())}function a(t){return t[c]}function l(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function f(t,e){const n=l(t)[e];if(!n)return[];let i=[n.callbacks];for(let s=0;s<n.childEvents.length;s++){const e=f(t,n.childEvents[s]);i=i.concat(e)}return i}function d(e,n,i){for(let[s,r]of e){r?"function"==typeof r&&(r=r(n.name)):r=n.name;const e=new t(n.source,r);e.path=[...n.path],s.fire(e,...i)}}function b(t,e,n){const i=f(t,e);for(const s of i)for(let t=0;t<s.length;t++)s[t].callback==n&&(s.splice(t,1),t--)}var w="object"==typeof global&&global&&global.Object===Object&&global,p="object"==typeof self&&self&&self.Object===Object&&self,v=w||p||Function("return this")(),g=v.Symbol,m=Object.prototype,y=m.hasOwnProperty,j=m.toString,_=g?g.toStringTag:void 0,k=Object.prototype.toString,x=g?g.toStringTag:void 0;function A(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":x&&x in Object(t)?function(t){var e=y.call(t,_),n=t[_];try{t[_]=void 0;var i=!0}catch(r){}var s=j.call(t);return i&&(e?t[_]=n:delete t[_]),s}(t):function(t){return k.call(t)}(t)}function M(t){return null!=t&&"object"==typeof t}var E=Array.isArray;function O(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function S(t){return t}function N(t){if(!O(t))return!1;var e=A(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var I=v["__core-js_shared__"],W=function(){var t=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),D=Function.prototype.toString;function T(t){if(null!=t){try{return D.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var C=/^\[object .+?Constructor\]$/,P=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function F(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!O(t)||(e=t,W&&W in e))&&(N(t)?P:C).test(T(t));var e}(n)?n:void 0}var L=F(v,"WeakMap"),V=Object.create,R=function(){function t(){}return function(e){if(!O(e))return{};if(V)return V(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function B(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var U,$,Y,z=Date.now,G=function(){try{var t=F(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),H=(U=G?function(t,e){return G(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:S,$=0,Y=0,function(){var t=z(),e=16-(t-Y);if(Y=t,e>0){if(++$>=800)return arguments[0]}else $=0;return U.apply(void 0,arguments)}),Z=/^(?:0|[1-9]\d*)$/;function J(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Z.test(t))&&t>-1&&t%1==0&&t<e}function K(t,e,n){"__proto__"==e&&G?G(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Q(t,e){return t===e||t!=t&&e!=e}var X=Object.prototype.hasOwnProperty;function q(t,e,n){var i=t[e];X.call(t,e)&&Q(i,n)&&(void 0!==n||e in t)||K(t,e,n)}function tt(t,e,n,i){var s=!n;n||(n={});for(var r=-1,o=e.length;++r<o;){var c=e[r],h=i?i(n[c],t[c],c,n,t):void 0;void 0===h&&(h=t[c]),s?K(n,c,h):q(n,c,h)}return n}var et=Math.max;function nt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function it(t){return null!=t&&nt(t.length)&&!N(t)}var st=Object.prototype;function rt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||st)}function ot(t){return M(t)&&"[object Arguments]"==A(t)}var ct=Object.prototype,ht=ct.hasOwnProperty,ut=ct.propertyIsEnumerable,at=ot(function(){return arguments}())?ot:function(t){return M(t)&&ht.call(t,"callee")&&!ut.call(t,"callee")},lt="object"==typeof exports&&exports&&!exports.nodeType&&exports,ft=lt&&"object"==typeof module&&module&&!module.nodeType&&module,dt=ft&&ft.exports===lt?v.Buffer:void 0,bt=(dt?dt.isBuffer:void 0)||function(){return!1},wt={};function pt(t){return function(e){return t(e)}}wt["[object Float32Array]"]=wt["[object Float64Array]"]=wt["[object Int8Array]"]=wt["[object Int16Array]"]=wt["[object Int32Array]"]=wt["[object Uint8Array]"]=wt["[object Uint8ClampedArray]"]=wt["[object Uint16Array]"]=wt["[object Uint32Array]"]=!0,wt["[object Arguments]"]=wt["[object Array]"]=wt["[object ArrayBuffer]"]=wt["[object Boolean]"]=wt["[object DataView]"]=wt["[object Date]"]=wt["[object Error]"]=wt["[object Function]"]=wt["[object Map]"]=wt["[object Number]"]=wt["[object Object]"]=wt["[object RegExp]"]=wt["[object Set]"]=wt["[object String]"]=wt["[object WeakMap]"]=!1;var vt="object"==typeof exports&&exports&&!exports.nodeType&&exports,gt=vt&&"object"==typeof module&&module&&!module.nodeType&&module,mt=gt&&gt.exports===vt&&w.process,yt=function(){try{return gt&&gt.require&&gt.require("util").types||mt&&mt.binding&&mt.binding("util")}catch(t){}}(),jt=yt&&yt.isTypedArray,_t=jt?pt(jt):function(t){return M(t)&&nt(t.length)&&!!wt[A(t)]},kt=Object.prototype.hasOwnProperty;function xt(t,e){var n=E(t),i=!n&&at(t),s=!n&&!i&&bt(t),r=!n&&!i&&!s&&_t(t),o=n||i||s||r,c=o?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],h=c.length;for(var u in t)!e&&!kt.call(t,u)||o&&("length"==u||s&&("offset"==u||"parent"==u)||r&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||J(u,h))||c.push(u);return c}function At(t,e){return function(n){return t(e(n))}}var Mt=At(Object.keys,Object),Et=Object.prototype.hasOwnProperty;function Ot(t){return it(t)?xt(t):function(t){if(!rt(t))return Mt(t);var e=[];for(var n in Object(t))Et.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}var St=Object.prototype.hasOwnProperty;function Nt(t){return it(t)?xt(t,!0):function(t){if(!O(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=rt(t),n=[];for(var i in t)("constructor"!=i||!e&&St.call(t,i))&&n.push(i);return n}(t)}var It,Wt=(It=function(t,e){tt(e,Nt(e),t)},function(t,e){return H(function(t,e,n){return e=et(void 0===e?t.length-1:e,0),function(){for(var i=arguments,s=-1,r=et(i.length-e,0),o=Array(r);++s<r;)o[s]=i[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=i[s];return c[e]=n(o),B(t,this,c)}}(t,e,S),t+"")}((function(t,e){var n=-1,i=e.length,s=i>1?e[i-1]:void 0,r=i>2?e[2]:void 0;for(s=It.length>3&&"function"==typeof s?(i--,s):void 0,r&&function(t,e,n){if(!O(n))return!1;var i=typeof e;return!!("number"==i?it(n)&&J(e,n.length):"string"==i&&e in n)&&Q(n[e],t)}(e[0],e[1],r)&&(s=i<3?void 0:s,i=1),t=Object(t);++n<i;){var o=e[n];o&&It(t,o)}return t}))),Dt=F(Object,"create"),Tt=Object.prototype.hasOwnProperty,Ct=Object.prototype.hasOwnProperty;function Pt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ft(t,e){for(var n=t.length;n--;)if(Q(t[n][0],e))return n;return-1}Pt.prototype.clear=function(){this.__data__=Dt?Dt(null):{},this.size=0},Pt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Pt.prototype.get=function(t){var e=this.__data__;if(Dt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Tt.call(e,t)?e[t]:void 0},Pt.prototype.has=function(t){var e=this.__data__;return Dt?void 0!==e[t]:Ct.call(e,t)},Pt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Dt&&void 0===e?"__lodash_hash_undefined__":e,this};var Lt=Array.prototype.splice;function Vt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Vt.prototype.clear=function(){this.__data__=[],this.size=0},Vt.prototype.delete=function(t){var e=this.__data__,n=Ft(e,t);return!(n<0||(n==e.length-1?e.pop():Lt.call(e,n,1),--this.size,0))},Vt.prototype.get=function(t){var e=this.__data__,n=Ft(e,t);return n<0?void 0:e[n][1]},Vt.prototype.has=function(t){return Ft(this.__data__,t)>-1},Vt.prototype.set=function(t,e){var n=this.__data__,i=Ft(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};var Rt=F(v,"Map");function Bt(t,e){var n,i,s=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?s["string"==typeof e?"string":"hash"]:s.map}function Ut(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function $t(t,e){for(var n=-1,i=e.length,s=t.length;++n<i;)t[s+n]=e[n];return t}Ut.prototype.clear=function(){this.size=0,this.__data__={hash:new Pt,map:new(Rt||Vt),string:new Pt}},Ut.prototype.delete=function(t){var e=Bt(this,t).delete(t);return this.size-=e?1:0,e},Ut.prototype.get=function(t){return Bt(this,t).get(t)},Ut.prototype.has=function(t){return Bt(this,t).has(t)},Ut.prototype.set=function(t,e){var n=Bt(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};var Yt=At(Object.getPrototypeOf,Object),zt=Function.prototype.toString,Gt=Object.prototype.hasOwnProperty,Ht=zt.call(Object);function Zt(t){var e=this.__data__=new Vt(t);this.size=e.size}Zt.prototype.clear=function(){this.__data__=new Vt,this.size=0},Zt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Zt.prototype.get=function(t){return this.__data__.get(t)},Zt.prototype.has=function(t){return this.__data__.has(t)},Zt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Vt){var i=n.__data__;if(!Rt||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ut(i)}return n.set(t,e),this.size=n.size,this};var Jt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Kt=Jt&&"object"==typeof module&&module&&!module.nodeType&&module,Qt=Kt&&Kt.exports===Jt?v.Buffer:void 0,Xt=Qt?Qt.allocUnsafe:void 0;function qt(){return[]}var te=Object.prototype.propertyIsEnumerable,ee=Object.getOwnPropertySymbols,ne=ee?function(t){return null==t?[]:(t=Object(t),function(e){for(var n=-1,i=null==e?0:e.length,s=0,r=[];++n<i;){var o=e[n];te.call(t,o)&&(r[s++]=o)}return r}(ee(t)))}:qt,ie=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)$t(e,ne(t)),t=Yt(t);return e}:qt;function se(t,e,n){var i=e(t);return E(t)?i:$t(i,n(t))}function re(t){return se(t,Ot,ne)}function oe(t){return se(t,Nt,ie)}var ce=F(v,"DataView"),he=F(v,"Promise"),ue=F(v,"Set"),ae=T(ce),le=T(Rt),fe=T(he),de=T(ue),be=T(L),we=A;(ce&&"[object DataView]"!=we(new ce(new ArrayBuffer(1)))||Rt&&"[object Map]"!=we(new Rt)||he&&"[object Promise]"!=we(he.resolve())||ue&&"[object Set]"!=we(new ue)||L&&"[object WeakMap]"!=we(new L))&&(we=function(t){var e=A(t),n="[object Object]"==e?t.constructor:void 0,i=n?T(n):"";if(i)switch(i){case ae:return"[object DataView]";case le:return"[object Map]";case fe:return"[object Promise]";case de:return"[object Set]";case be:return"[object WeakMap]"}return e});const pe=we;var ve=Object.prototype.hasOwnProperty,ge=v.Uint8Array;function me(t){var e=new t.constructor(t.byteLength);return new ge(e).set(new ge(t)),e}var ye=/\w*$/,je=g?g.prototype:void 0,_e=je?je.valueOf:void 0;var ke=yt&&yt.isMap,xe=ke?pt(ke):function(t){return M(t)&&"[object Map]"==pe(t)},Ae=yt&&yt.isSet,Me=Ae?pt(Ae):function(t){return M(t)&&"[object Set]"==pe(t)},Ee={};function Oe(t,e,n,i,s,r){var o,c=1&e,h=2&e,u=4&e;if(n&&(o=s?n(t,i,s,r):n(t)),void 0!==o)return o;if(!O(t))return t;var a=E(t);if(a){if(o=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ve.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!c)return function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}(t,o)}else{var l=pe(t),f="[object Function]"==l||"[object GeneratorFunction]"==l;if(bt(t))return function(t,e){if(e)return t.slice();var n=t.length,i=Xt?Xt(n):new t.constructor(n);return t.copy(i),i}(t,c);if("[object Object]"==l||"[object Arguments]"==l||f&&!s){if(o=h||f?{}:function(t){return"function"!=typeof t.constructor||rt(t)?{}:R(Yt(t))}(t),!c)return h?function(t,e){return tt(t,ie(t),e)}(t,function(t,e){return t&&tt(e,Nt(e),t)}(o,t)):function(t,e){return tt(t,ne(t),e)}(t,function(t,e){return t&&tt(e,Ot(e),t)}(o,t))}else{if(!Ee[l])return s?t:{};o=function(t,e,n){var i,s,r=t.constructor;switch(e){case"[object ArrayBuffer]":return me(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return function(t,e){var n=e?me(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var n=e?me(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return(s=new(i=t).constructor(i.source,ye.exec(i))).lastIndex=i.lastIndex,s;case"[object Set]":return new r;case"[object Symbol]":return _e?Object(_e.call(t)):{}}}(t,l,c)}}r||(r=new Zt);var d=r.get(t);if(d)return d;r.set(t,o),Me(t)?t.forEach((function(i){o.add(Oe(i,e,n,i,t,r))})):xe(t)&&t.forEach((function(i,s){o.set(s,Oe(i,e,n,s,t,r))}));var b=a?void 0:(u?h?oe:re:h?Nt:Ot)(t);return function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n););}(b||t,(function(i,s){b&&(i=t[s=i]),q(o,s,Oe(i,e,n,s,t,r))})),o}function Se(t){return M(t)&&1===t.nodeType&&!function(t){if(!M(t)||"[object Object]"!=A(t))return!1;var e=Yt(t);if(null===e)return!0;var n=Gt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&zt.call(n)==Ht}(t)}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Ee["[object Arguments]"]=Ee["[object Array]"]=Ee["[object ArrayBuffer]"]=Ee["[object DataView]"]=Ee["[object Boolean]"]=Ee["[object Date]"]=Ee["[object Float32Array]"]=Ee["[object Float64Array]"]=Ee["[object Int8Array]"]=Ee["[object Int16Array]"]=Ee["[object Int32Array]"]=Ee["[object Map]"]=Ee["[object Number]"]=Ee["[object Object]"]=Ee["[object RegExp]"]=Ee["[object Set]"]=Ee["[object String]"]=Ee["[object Symbol]"]=Ee["[object Uint8Array]"]=Ee["[object Uint8ClampedArray]"]=Ee["[object Uint16Array]"]=Ee["[object Uint32Array]"]=!0,Ee["[object Error]"]=Ee["[object Function]"]=Ee["[object WeakMap]"]=!1;const Ne=Symbol("observableProperties"),Ie=Symbol("boundObservables"),We=Symbol("boundProperties"),De={set(t,e){if(O(t))return void Object.keys(t).forEach(e=>{this.set(e,t[e])},this);Te(this);const n=this[Ne];if(t in this&&!n.has(t))throw new s("observable-set-cannot-override",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>n.get(t),set(e){const i=n.get(t);let s=this.fire("set:"+t,t,e,i);void 0===s&&(s=e),i===s&&n.has(t)||(n.set(t,s),this.fire("change:"+t,t,s,i))}}),this[t]=e},bind(...t){if(!t.length||!Fe(t))throw new s("observable-bind-wrong-properties",this);if(new Set(t).size!==t.length)throw new s("observable-bind-duplicate-properties",this);Te(this);const e=this[We];t.forEach(t=>{if(e.has(t))throw new s("observable-bind-rebind",this)});const n=new Map;return t.forEach(t=>{const i={property:t,to:[]};e.set(t,i),n.set(t,i)}),{to:Ce,toMany:Pe,_observable:this,_bindProperties:t,_to:[],_bindings:n}},unbind(...t){if(!this[Ne])return;const e=this[We],n=this[Ie];if(t.length){if(!Fe(t))throw new s("observable-unbind-wrong-properties",this);t.forEach(t=>{const i=e.get(t);if(!i)return;let s,r,o,c;i.to.forEach(t=>{s=t[0],r=t[1],o=n.get(s),c=o[r],c.delete(i),c.size||delete o[r],Object.keys(o).length||(n.delete(s),this.stopListening(s,"change"))}),e.delete(t)})}else n.forEach((t,e)=>{this.stopListening(e,"change")}),n.clear(),e.clear()},decorate(t){const e=this[t];if(!e)throw new s("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,(t,n)=>{t.return=e.apply(this,n)}),this[t]=function(...e){return this.fire(t,e)}}};function Te(t){t[Ne]||(Object.defineProperty(t,Ne,{value:new Map}),Object.defineProperty(t,Ie,{value:new Map}),Object.defineProperty(t,We,{value:new Map}))}function Ce(...t){const e=function(...t){if(!t.length)throw new s("observable-bind-to-parse-error",null);const e={to:[]};let n;return"function"==typeof t[t.length-1]&&(e.callback=t.pop()),t.forEach(t=>{if("string"==typeof t)n.properties.push(t);else{if("object"!=typeof t)throw new s("observable-bind-to-parse-error",null);n={observable:t,properties:[]},e.to.push(n)}}),e}(...t),n=Array.from(this._bindings.keys()),i=n.length;if(!e.callback&&e.to.length>1)throw new s("observable-bind-to-no-callback",this);if(i>1&&e.callback)throw new s("observable-bind-to-extra-callback",this);var r;
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */e.to.forEach(t=>{if(t.properties.length&&t.properties.length!==i)throw new s("observable-bind-to-properties-length",this);t.properties.length||(t.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(n[0]).callback=e.callback),r=this._observable,this._to.forEach(t=>{const e=r[Ie];let n;e.get(t.observable)||r.listenTo(t.observable,"change",(i,s)=>{n=e.get(t.observable)[s],n&&n.forEach(t=>{Le(r,t.property)})})}),function(t){let e;t._bindings.forEach((n,i)=>{t._to.forEach(s=>{e=s.properties[n.callback?0:t._bindProperties.indexOf(i)],n.to.push([s.observable,e]),function(t,e,n,i){const s=t[Ie],r=s.get(n),o=r||{};o[i]||(o[i]=new Set),o[i].add(e),r||s.set(n,o)}(t._observable,n,s.observable,e)})})}(this),this._bindProperties.forEach(t=>{Le(this._observable,t)})}function Pe(t,e,n){if(this._bindings.size>1)throw new s("observable-bind-to-many-not-one-binding",this);this.to(...function(t,e){const n=t.map(t=>[t,e]);return Array.prototype.concat.apply([],n)}(t,e),n)}function Fe(t){return t.every(t=>"string"==typeof t)}function Le(t,e){const n=t[We].get(e);let i;n.callback?i=n.callback.apply(t,n.to.map(t=>t[0][t[1]])):(i=n.to[0],i=i[0][i[1]]),Object.prototype.hasOwnProperty.call(t,e)?t[e]=i:t.set(e,i)}function Ve(t,...e){e.forEach(e=>{Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(n=>{if(n in t.prototype)return;const i=Object.getOwnPropertyDescriptor(e,n);i.enumerable=!1,Object.defineProperty(t.prototype,n,i)})})}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Wt(De,h);class Re{constructor(t){this.editor=t,this.set("isEnabled",!0),this._disableStack=new Set}forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",Be,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",Be),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function Be(t){t.return=!1,t.stop()}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ue(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node}return!1}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $e(t){const e=Object.prototype.toString.apply(t);return"[object Window]"==e||"[object global]"==e}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Ve(Re,De);const Ye=Wt({},h,{listenTo(t,...e){if(Ue(t)||$e(t)){const n=this._getProxyEmitter(t)||new ze(t);n.attach(...e),t=n}h.listenTo.call(this,t,...e)},stopListening(t,e,n){if(Ue(t)||$e(t)){const e=this._getProxyEmitter(t);if(!e)return;t=e}h.stopListening.call(this,t,e,n),t instanceof ze&&t.detach(e)},_getProxyEmitter(t){return this,e=Ge(t),this[o]&&this[o][e]?this[o][e].emitter:null;var e}});class ze{constructor(t){u(this,Ge(t)),this._domNode=t}}function Ge(t){return t["data-ck-expando"]||(t["data-ck-expando"]=n())}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Wt(ze.prototype,h,{attach(t,e,n={}){if(this._domListeners&&this._domListeners[t])return;const i={capture:!!n.useCapture,passive:!!n.usePassive},s=this._createDomListener(t,i);this._domNode.addEventListener(t,s,i),this._domListeners||(this._domListeners={}),this._domListeners[t]=s},detach(t){let e;!this._domListeners[t]||(e=this._events[t])&&e.callbacks.length||this._domListeners[t].removeListener()},_createDomListener(t,e){const n=e=>{this.fire(t,e)};return n.removeListener=()=>{this._domNode.removeEventListener(t,n,e),delete this._domListeners[t]},n}});class He{constructor(t){this.view=t,this.document=t.document,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(t){return t&&3===t.nodeType&&(t=t.parentNode),!(!t||1!==t.nodeType)&&t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}Ve(He,Ye);
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
class Ze extends He{observe(t){this.listenTo(t,"load",(t,e)=>{const n=e.target;this.checkShouldIgnoreEventFromTarget(n)||"IMG"==n.tagName&&this._fireEvents(e)},{useCapture:!0})}_fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t))}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Je{constructor(){this._stack=[]}add(t,e){const n=this._stack,i=n[0];this._insertDescriptor(t);const s=n[0];i===s||Ke(i,s)||this.fire("change:top",{oldDescriptor:i,newDescriptor:s,writer:e})}remove(t,e){const n=this._stack,i=n[0];this._removeDescriptor(t);const s=n[0];i===s||Ke(i,s)||this.fire("change:top",{oldDescriptor:i,newDescriptor:s,writer:e})}_insertDescriptor(t){const e=this._stack,n=e.findIndex(e=>e.id===t.id);if(Ke(t,e[n]))return;n>-1&&e.splice(n,1);let i=0;for(;e[i]&&((s=e[i]).priority>(r=t).priority||!(s.priority<r.priority)&&Qe(s.classes)>Qe(r.classes));)i++;var s,r;e.splice(i,0,t)}_removeDescriptor(t){const e=this._stack,n=e.findIndex(e=>e.id===t);n>-1&&e.splice(n,1)}}function Ke(t,e){return t&&e&&t.priority==e.priority&&Qe(t.classes)==Qe(e.classes)}function Qe(t){return Array.isArray(t)?t.sort().join(","):t}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xe(t){return!(!t||!t[Symbol.iterator])}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Ve(Je,h);class qe{constructor(t={},e={}){const n=Xe(t);if(n||(e=t),this._items=[],this._itemMap=new Map,this._idProperty=e.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],n)for(const i of t)this._items.push(i),this._itemMap.set(this._getItemIdBeforeAdding(i),i)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,e){return this.addMany([t],e)}addMany(t,e){if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new s("collection-add-item-invalid-index",this);for(let n=0;n<t.length;n++){const i=t[n],s=this._getItemIdBeforeAdding(i),r=e+n;this._items.splice(r,0,i),this._itemMap.set(s,i),this.fire("add",i,r)}return this.fire("change",{added:t,removed:[],index:e}),this}get(t){let e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new s("collection-get-invalid-arg",this);e=this._items[t]}return e||null}has(t){return this._itemMap.has("string"==typeof t?t:t[this._idProperty])}getIndex(t){let e;return e="string"==typeof t?this._itemMap.get(t):t,this._items.indexOf(e)}remove(t){const[e,n]=this._remove(t);return this.fire("change",{added:[],removed:[e],index:n}),e}map(t,e){return this._items.map(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new s("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{this._setUpBindToBinding("function"==typeof t?e=>t(e):e=>e[t])}}}_setUpBindToBinding(t){const e=this._bindToCollection,n=(n,i,s)=>{const r=e._bindToCollection==this,o=e._bindToInternalToExternalMap.get(i);if(r&&o)this._bindToExternalToInternalMap.set(i,o),this._bindToInternalToExternalMap.set(o,i);else{const n=t(i);if(!n)return void this._skippedIndexesFromExternal.push(s);let r=s;for(const t of this._skippedIndexesFromExternal)s>t&&r--;for(const t of e._skippedIndexesFromExternal)r>=t&&r++;this._bindToExternalToInternalMap.set(i,n),this._bindToInternalToExternalMap.set(n,i),this.add(n,r);for(let t=0;t<e._skippedIndexesFromExternal.length;t++)r<=e._skippedIndexesFromExternal[t]&&e._skippedIndexesFromExternal[t]++}};for(const i of e)n(0,i,e.getIndex(i));this.listenTo(e,"add",n),this.listenTo(e,"remove",(t,e,n)=>{const i=this._bindToExternalToInternalMap.get(e);i&&this.remove(i),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((t,e)=>(n<e&&t.push(e-1),n>e&&t.push(e),t),[])})}_getItemIdBeforeAdding(t){const e=this._idProperty;let i;if(e in t){if(i=t[e],"string"!=typeof i)throw new s("collection-add-invalid-id",this);if(this.get(i))throw new s("collection-add-item-already-exists",this)}else t[e]=i=n();return i}_remove(t){let e,n,i,r=!1;const o=this._idProperty;if("string"==typeof t?(n=t,i=this._itemMap.get(n),r=!i,i&&(e=this._items.indexOf(i))):"number"==typeof t?(e=t,i=this._items[e],r=!i,i&&(n=i[o])):(i=t,n=i[o],e=this._items.indexOf(i),r=-1==e||!this._itemMap.get(n)),r)throw new s("collection-remove-404",this);this._items.splice(e,1),this._itemMap.delete(n);const c=this._bindToInternalToExternalMap.get(i);return this._bindToInternalToExternalMap.delete(i),this._bindToExternalToInternalMap.delete(c),this.fire("remove",i,e),[i,e]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}Ve(qe,h);
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
class tn extends qe{constructor(t=[]){super(t,{idProperty:"viewUid"}),this.on("add",(t,e,n)=>{this._renderViewIntoCollectionParent(e,n)}),this.on("remove",(t,e)=>{e.element&&this._parentElement&&e.element.remove()}),this._parentElement=null}destroy(){this.map(t=>t.destroy())}setParent(t){this._parentElement=t;for(const e of this)this._renderViewIntoCollectionParent(e)}delegate(...t){if(!t.length||!t.every(t=>"string"==typeof t))throw new s("ui-viewcollection-delegate-wrong-events",this);return{to:e=>{for(const n of this)for(const i of t)n.delegate(i).to(e);this.on("add",(n,i)=>{for(const s of t)i.delegate(s).to(e)}),this.on("remove",(n,i)=>{for(const s of t)i.stopDelegating(s,e)})}}}_renderViewIntoCollectionParent(t,e){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[e])}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
function en(t){return Array.isArray(t)?t:[t]}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nn{constructor(t){Object.assign(this,dn(fn(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:t,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new s("ui-template-revert-not-applied",[this,t]);this._revertTemplateFromNode(t,this._revertData)}*getViews(){yield*function*t(e){if(e.children)for(const n of e.children)gn(n)?yield n:mn(n)&&(yield*t(n))}(this)}static bind(t,e){return{to:(n,i)=>new rn({eventNameOrFunction:n,attribute:n,observable:t,emitter:e,callback:i}),if:(n,i,s)=>new on({observable:t,emitter:e,attribute:n,valueIfTrue:i,callback:s})}}static extend(t,e){if(t._isRendered)throw new s("template-extend-render",[this,t]);!function t(e,n){if(n.attributes&&(e.attributes||(e.attributes={}),pn(e.attributes,n.attributes)),n.eventListeners&&(e.eventListeners||(e.eventListeners={}),pn(e.eventListeners,n.eventListeners)),n.text&&e.text.push(...n.text),n.children&&n.children.length){if(e.children.length!=n.children.length)throw new s("ui-template-extend-children-mismatch",e);let i=0;for(const s of n.children)t(e.children[i++],s)}}(t,dn(fn(e)))}_renderNode(t){let e;if(e=t.node?this.tag&&this.text:this.tag?this.text:!this.text,e)throw new s("ui-template-wrong-syntax",this);return this.text?this._renderText(t):this._renderElement(t)}_renderElement(t){let e=t.node;return e||(e=t.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),e}_renderText(t){let e=t.node;return e?t.revertData.text=e.textContent:e=t.node=document.createTextNode(""),cn(this.text)?this._bindToObservable({schema:this.text,updater:un(e),data:t}):e.textContent=this.text.join(""),e}_renderAttributes(t){let e,n,i,s;if(!this.attributes)return;const r=t.node,o=t.revertData;for(e in this.attributes)if(i=r.getAttribute(e),n=this.attributes[e],o&&(o.attributes[e]=i),s=O(n[0])&&n[0].ns?n[0].ns:null,cn(n)){const c=s?n[0].value:n;o&&jn(e)&&c.unshift(i),this._bindToObservable({schema:c,updater:an(r,e,s),data:t})}else"style"==e&&"string"!=typeof n[0]?this._renderStyleAttribute(n[0],t):(o&&i&&jn(e)&&n.unshift(i),n=n.map(t=>t&&t.value||t).reduce((t,e)=>t.concat(e),[]).reduce(wn,""),vn(n)||r.setAttributeNS(s,e,n))}_renderStyleAttribute(t,e){const n=e.node;for(const i in t){const s=t[i];cn(s)?this._bindToObservable({schema:[s],updater:ln(n,i),data:e}):n.style[i]=s}}_renderElementChildren(t){const e=t.node,n=t.intoFragment?document.createDocumentFragment():e,i=t.isApplying;let s=0;for(const r of this.children)if(yn(r)){if(!i){r.setParent(e);for(const t of r)n.appendChild(t.element)}}else if(gn(r))i||(r.isRendered||r.render(),n.appendChild(r.element));else if(Ue(r))n.appendChild(r);else if(i){const e={children:[],bindings:[],attributes:{}};t.revertData.children.push(e),r._renderNode({node:n.childNodes[s++],isApplying:!0,revertData:e})}else n.appendChild(r.render());t.intoFragment&&e.appendChild(n)}_setUpListeners(t){if(this.eventListeners)for(const e in this.eventListeners){const n=this.eventListeners[e].map(n=>{const[i,s]=e.split("@");return n.activateDomEventListener(i,s,t)});t.revertData&&t.revertData.bindings.push(n)}}_bindToObservable({schema:t,updater:e,data:n}){const i=n.revertData;hn(t,e,n);const s=t.filter(t=>!vn(t)).filter(t=>t.observable).map(i=>i.activateAttributeListener(t,e,n));i&&i.bindings.push(s)}_revertTemplateFromNode(t,e){for(const n of e.bindings)for(const t of n)t();if(e.text)t.textContent=e.text;else{for(const n in e.attributes){const i=e.attributes[n];null===i?t.removeAttribute(n):t.setAttribute(n,i)}for(let n=0;n<e.children.length;++n)this._revertTemplateFromNode(t.childNodes[n],e.children[n])}}}Ve(nn,h);class sn{constructor(t){Object.assign(this,t)}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,n){const i=()=>hn(t,e,n);return this.emitter.listenTo(this.observable,"change:"+this.attribute,i),()=>{this.emitter.stopListening(this.observable,"change:"+this.attribute,i)}}}class rn extends sn{activateDomEventListener(t,e,n){const i=(t,n)=>{e&&!n.target.matches(e)||("function"==typeof this.eventNameOrFunction?this.eventNameOrFunction(n):this.observable.fire(this.eventNameOrFunction,n))};return this.emitter.listenTo(n.node,t,i),()=>{this.emitter.stopListening(n.node,t,i)}}}class on extends sn{getValue(t){return!vn(super.getValue(t))&&(this.valueIfTrue||!0)}}function cn(t){return!!t&&(t.value&&(t=t.value),Array.isArray(t)?t.some(cn):t instanceof sn)}function hn(t,e,{node:n}){let i=function(t,e){return t.map(t=>t instanceof sn?t.getValue(e):t)}(t,n);i=1==t.length&&t[0]instanceof on?i[0]:i.reduce(wn,""),vn(i)?e.remove():e.set(i)}function un(t){return{set(e){t.textContent=e},remove(){t.textContent=""}}}function an(t,e,n){return{set(i){t.setAttributeNS(n,e,i)},remove(){t.removeAttributeNS(n,e)}}}function ln(t,e){return{set(n){t.style[e]=n},remove(){t.style[e]=null}}}function fn(t){return function(t,e){return Oe(t,5,e="function"==typeof e?e:void 0)}(t,t=>{if(t&&(t instanceof sn||mn(t)||gn(t)||yn(t)))return t})}function dn(t){if("string"==typeof t?t=function(t){return{text:[t]}}(t):t.text&&function(t){t.text=en(t.text)}(t),t.on&&(t.eventListeners=function(t){for(const e in t)bn(t,e);return t}(t.on),delete t.on),!t.text){t.attributes&&function(t){for(const e in t)t[e].value&&(t[e].value=en(t[e].value)),bn(t,e)}(t.attributes);const e=[];if(t.children)if(yn(t.children))e.push(t.children);else for(const n of t.children)mn(n)||gn(n)||Ue(n)?e.push(n):e.push(new nn(n));t.children=e}return t}function bn(t,e){t[e]=en(t[e])}function wn(t,e){return vn(e)?t:vn(t)?e:`${t} ${e}`}function pn(t,e){for(const n in e)t[n]?t[n].push(...e[n]):t[n]=e[n]}function vn(t){return!t&&0!==t}function gn(t){return t instanceof _n}function mn(t){return t instanceof nn}function yn(t){return t instanceof tn}function jn(t){return"class"==t||"style"==t}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _n{constructor(t){this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new qe,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(e,n)=>{n.locale=t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=nn.bind(this,this)}createCollection(t){const e=new tn(t);return this._viewCollections.add(e),e}registerChild(t){Xe(t)||(t=[t]);for(const e of t)this._unboundChildren.add(e)}deregisterChild(t){Xe(t)||(t=[t]);for(const e of t)this._unboundChildren.remove(e)}setTemplate(t){this.template=new nn(t)}extendTemplate(t){nn.extend(this.template,t)}render(){if(this.isRendered)throw new s("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(t=>t.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}Ve(_n,Ye),Ve(_n,De);
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
class kn extends _n{constructor(){super();const t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon"],viewBox:t.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),e=t.getAttribute("viewBox");for(e&&(this.viewBox=e),this.element.innerHTML="";t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function xn(t){return"[object Range]"==Object.prototype.toString.apply(t)}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function An(t){const e=t.ownerDocument.defaultView.getComputedStyle(t);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
const Mn=["top","right","bottom","left","width","height"];class En{constructor(t){const e=xn(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),Se(t)||e)if(e){const e=En.getDomRangeRects(t);On(this,En.getBoundingRect(e))}else On(this,t.getBoundingClientRect());else if($e(t)){const{innerWidth:e,innerHeight:n}=t;On(this,{top:0,right:e,bottom:n,left:0,width:e,height:n})}else On(this,t)}clone(){return new En(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left)};return e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0?null:new En(e)}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(!Sn(t)){let n=t.parentNode||t.commonAncestorContainer;for(;n&&!Sn(n);){const t=new En(n),i=e.getIntersection(t);if(!i)return null;i.getArea()<e.getArea()&&(e=i),n=n.parentNode}}return e}isEqual(t){for(const e of Mn)if(this[e]!==t[e])return!1;return!0}contains(t){const e=this.getIntersection(t);return!(!e||!e.isEqual(t))}excludeScrollbarsAndBorders(){const t=this._source;let e,n,i;if($e(t))e=t.innerWidth-t.document.documentElement.clientWidth,n=t.innerHeight-t.document.documentElement.clientHeight,i=t.getComputedStyle(t.document.documentElement).direction;else{const s=An(this._source);e=t.offsetWidth-t.clientWidth-s.left-s.right,n=t.offsetHeight-t.clientHeight-s.top-s.bottom,i=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=s.left,this.top+=s.top,this.right-=s.right,this.bottom-=s.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,"ltr"===i?this.right-=e:this.left+=e,this.height-=n,this.bottom-=n,this}static getDomRangeRects(t){const e=[],n=Array.from(t.getClientRects());if(n.length)for(const i of n)e.push(new En(i));else{let n=t.startContainer;"[object Text]"==Object.prototype.toString.call(n)&&(n=n.parentNode);const i=new En(n.getBoundingClientRect());i.right=i.left,i.width=0,e.push(i)}return e}static getBoundingRect(t){const e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY};let n=0;for(const i of t)n++,e.left=Math.min(e.left,i.left),e.top=Math.min(e.top,i.top),e.right=Math.max(e.right,i.right),e.bottom=Math.max(e.bottom,i.bottom);return 0==n?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new En(e))}}function On(t,e){for(const n of Mn)t[n]=e[n]}function Sn(t){return!!Se(t)&&t===t.ownerDocument.body}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Nn={window,document};
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
function In({element:t,target:e,positions:n,limiter:i,fitInViewport:s}){N(e)&&(e=e()),N(i)&&(i=i());const r=function(t){return t&&t.parentNode?t.offsetParent===Nn.document.body?null:t.offsetParent:null}(t),o=new En(t),c=new En(e);let h,u;if(i||s){const t=function(t,e){const{elementRect:n,viewportRect:i}=e,s=n.getArea(),r=function(t,{targetRect:e,elementRect:n,limiterRect:i,viewportRect:s}){const r=[],o=n.getArea();for(const c of t){const t=Wn(c,e,n);if(!t)continue;const[h,u]=t;let a=0,l=0;if(i)if(s){const t=i.getIntersection(s);t&&(a=t.getIntersectionArea(u))}else a=i.getIntersectionArea(u);s&&(l=s.getIntersectionArea(u));const f={positionName:h,positionRect:u,limiterIntersectArea:a,viewportIntersectArea:l};if(a===o)return[f];r.push(f)}return r}(t,e);if(i){const t=Dn(r.filter(({viewportIntersectArea:t})=>t===s),s);if(t)return t}return Dn(r,s)}(n,{targetRect:c,elementRect:o,limiterRect:i&&new En(i).getVisible(),viewportRect:s&&new En(Nn.window)});[u,h]=t||Wn(n[0],c,o)}else[u,h]=Wn(n[0],c,o);let a=Tn(h);return r&&(a=function({left:t,top:e},n){const i=Tn(new En(n)),s=An(n);return t-=i.left,e-=i.top,t+=n.scrollLeft,e+=n.scrollTop,{left:t-=s.left,top:e-=s.top}}(a,r)),{left:a.left,top:a.top,name:u}}function Wn(t,e,n){const i=t(e,n);if(!i)return null;const{left:s,top:r,name:o}=i;return[o,n.clone().moveTo(s,r)]}function Dn(t,e){let n,i,s=0;for(const{positionName:r,positionRect:o,limiterIntersectArea:c,viewportIntersectArea:h}of t){if(c===e)return[r,o];const t=h**2+c**2;t>s&&(s=t,n=o,i=r)}return n?[i,n]:null}function Tn({left:t,top:e}){const{scrollX:n,scrollY:i}=Nn.window;return{left:t+n,top:e+i}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Cn(t){return e=>e+t}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */const Pn=Cn("px"),Fn=Nn.document.body;class Ln extends _n{constructor(t){super(t);const e=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class"),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",e.to("position",t=>"ck-balloon-panel_"+t),e.if("isVisible","ck-balloon-panel_visible"),e.if("withArrow","ck-balloon-panel_with-arrow"),e.to("class")],style:{top:e.to("top",Pn),left:e.to("left",Pn)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){this.show();const e=Ln.defaultPositions,n=Object.assign({},{element:this.element,positions:[e.southArrowNorth,e.southArrowNorthMiddleWest,e.southArrowNorthMiddleEast,e.southArrowNorthWest,e.southArrowNorthEast,e.northArrowSouth,e.northArrowSouthMiddleWest,e.northArrowSouthMiddleEast,e.northArrowSouthWest,e.northArrowSouthEast],limiter:Fn,fitInViewport:!0},t),i=Ln._getOptimalPosition(n),s=parseInt(i.left),r=parseInt(i.top);Object.assign(this,{top:r,left:s,position:i.name})}pin(t){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this._startPinning(t),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){this.attachTo(t);const e=Vn(t.target),n=t.limiter?Vn(t.limiter):Fn;this.listenTo(Nn.document,"scroll",(i,s)=>{const r=s.target,o=e&&r.contains(e),c=n&&r.contains(n);!o&&!c&&e&&n||this.attachTo(t)},{useCapture:!0}),this.listenTo(Nn.window,"resize",()=>{this.attachTo(t)})}_stopPinning(){this.stopListening(Nn.document,"scroll"),this.stopListening(Nn.window,"resize")}}function Vn(t){return Se(t)?t:xn(t)?t.commonAncestorContainer:"function"==typeof t?Vn(t()):null}function Rn(t,e){return t.top-e.height-Ln.arrowVerticalOffset}function Bn(t){return t.bottom+Ln.arrowVerticalOffset}Ln.arrowHorizontalOffset=25,Ln.arrowVerticalOffset=10,Ln._getOptimalPosition=In,Ln.defaultPositions={northWestArrowSouthWest:(t,e)=>({top:Rn(t,e),left:t.left-Ln.arrowHorizontalOffset,name:"arrow_sw"}),northWestArrowSouthMiddleWest:(t,e)=>({top:Rn(t,e),left:t.left-.25*e.width-Ln.arrowHorizontalOffset,name:"arrow_smw"}),northWestArrowSouth:(t,e)=>({top:Rn(t,e),left:t.left-e.width/2,name:"arrow_s"}),northWestArrowSouthMiddleEast:(t,e)=>({top:Rn(t,e),left:t.left-.75*e.width+Ln.arrowHorizontalOffset,name:"arrow_sme"}),northWestArrowSouthEast:(t,e)=>({top:Rn(t,e),left:t.left-e.width+Ln.arrowHorizontalOffset,name:"arrow_se"}),northArrowSouthWest:(t,e)=>({top:Rn(t,e),left:t.left+t.width/2-Ln.arrowHorizontalOffset,name:"arrow_sw"}),northArrowSouthMiddleWest:(t,e)=>({top:Rn(t,e),left:t.left+t.width/2-.25*e.width-Ln.arrowHorizontalOffset,name:"arrow_smw"}),northArrowSouth:(t,e)=>({top:Rn(t,e),left:t.left+t.width/2-e.width/2,name:"arrow_s"}),northArrowSouthMiddleEast:(t,e)=>({top:Rn(t,e),left:t.left+t.width/2-.75*e.width+Ln.arrowHorizontalOffset,name:"arrow_sme"}),northArrowSouthEast:(t,e)=>({top:Rn(t,e),left:t.left+t.width/2-e.width+Ln.arrowHorizontalOffset,name:"arrow_se"}),northEastArrowSouthWest:(t,e)=>({top:Rn(t,e),left:t.right-Ln.arrowHorizontalOffset,name:"arrow_sw"}),northEastArrowSouthMiddleWest:(t,e)=>({top:Rn(t,e),left:t.right-.25*e.width-Ln.arrowHorizontalOffset,name:"arrow_smw"}),northEastArrowSouth:(t,e)=>({top:Rn(t,e),left:t.right-e.width/2,name:"arrow_s"}),northEastArrowSouthMiddleEast:(t,e)=>({top:Rn(t,e),left:t.right-.75*e.width+Ln.arrowHorizontalOffset,name:"arrow_sme"}),northEastArrowSouthEast:(t,e)=>({top:Rn(t,e),left:t.right-e.width+Ln.arrowHorizontalOffset,name:"arrow_se"}),southWestArrowNorthWest:t=>({top:Bn(t),left:t.left-Ln.arrowHorizontalOffset,name:"arrow_nw"}),southWestArrowNorthMiddleWest:(t,e)=>({top:Bn(t),left:t.left-.25*e.width-Ln.arrowHorizontalOffset,name:"arrow_nmw"}),southWestArrowNorth:(t,e)=>({top:Bn(t),left:t.left-e.width/2,name:"arrow_n"}),southWestArrowNorthMiddleEast:(t,e)=>({top:Bn(t),left:t.left-.75*e.width+Ln.arrowHorizontalOffset,name:"arrow_nme"}),southWestArrowNorthEast:(t,e)=>({top:Bn(t),left:t.left-e.width+Ln.arrowHorizontalOffset,name:"arrow_ne"}),southArrowNorthWest:t=>({top:Bn(t),left:t.left+t.width/2-Ln.arrowHorizontalOffset,name:"arrow_nw"}),southArrowNorthMiddleWest:(t,e)=>({top:Bn(t),left:t.left+t.width/2-.25*e.width-Ln.arrowHorizontalOffset,name:"arrow_nmw"}),southArrowNorth:(t,e)=>({top:Bn(t),left:t.left+t.width/2-e.width/2,name:"arrow_n"}),southArrowNorthMiddleEast:(t,e)=>({top:Bn(t),left:t.left+t.width/2-.75*e.width+Ln.arrowHorizontalOffset,name:"arrow_nme"}),southArrowNorthEast:(t,e)=>({top:Bn(t),left:t.left+t.width/2-e.width+Ln.arrowHorizontalOffset,name:"arrow_ne"}),southEastArrowNorthWest:t=>({top:Bn(t),left:t.right-Ln.arrowHorizontalOffset,name:"arrow_nw"}),southEastArrowNorthMiddleWest:(t,e)=>({top:Bn(t),left:t.right-.25*e.width-Ln.arrowHorizontalOffset,name:"arrow_nmw"}),southEastArrowNorth:(t,e)=>({top:Bn(t),left:t.right-e.width/2,name:"arrow_n"}),southEastArrowNorthMiddleEast:(t,e)=>({top:Bn(t),left:t.right-.75*e.width+Ln.arrowHorizontalOffset,name:"arrow_nme"}),southEastArrowNorthEast:(t,e)=>({top:Bn(t),left:t.right-e.width+Ln.arrowHorizontalOffset,name:"arrow_ne"})};const Un="widget-type-around";
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $n(t,e,n){return t&&Jn(t)&&!n.isInline(e)}function Yn(t){return t.closest(".ck-widget__type-around__button")}function zn(t){return t.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function Gn(t,e){const n=t.closest(".ck-widget");return e.mapDomToView(n)}function Hn(t){return t.getAttribute("widget-type-around")}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zn="ck-widget_selected";function Jn(t){return!!t.is("element")&&!!t.getCustomProperty("widget")}function Kn(t,e,n={}){if(!t.is("containerElement"))throw new s("widget-to-widget-wrong-element-type",null,{element:t});return e.setAttribute("contenteditable","false",t),e.addClass("ck-widget",t),e.setCustomProperty("widget",!0,t),t.getFillerOffset=qn,n.label&&function(t,e,n){n.setCustomProperty("widgetLabel",e,t)}(t,n.label,e),n.hasSelectionHandle&&function(t,e){const n=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},(function(t){const e=this.toDomElement(t),n=new kn;return n.set("content","data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTYgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQgMHYxSDF2M0gwVi41QS41LjUgMCAwIDEgLjUgMEg0em04IDBoMy41YS41LjUgMCAwIDEgLjUuNVY0aC0xVjFoLTNWMHpNNCAxNkguNWEuNS41IDAgMCAxLS41LS41VjEyaDF2M2gzdjF6bTggMHYtMWgzdi0zaDF2My41YS41LjUgMCAwIDEtLjUuNUgxMnoiLz48cGF0aCBmaWxsLW9wYWNpdHk9Ii4yNTYiIGQ9Ik0xIDFoMTR2MTRIMXoiLz48ZyBjbGFzcz0iY2staWNvbl9fc2VsZWN0ZWQtaW5kaWNhdG9yIj48cGF0aCBkPSJNNyAwaDJ2MUg3VjB6TTAgN2gxdjJIMFY3em0xNSAwaDF2MmgtMVY3em0tOCA4aDJ2MUg3di0xeiIvPjxwYXRoIGZpbGwtb3BhY2l0eT0iLjI1NCIgZD0iTTEgMWgxNHYxNEgxeiIvPjwvZz48L3N2Zz4="),n.render(),e.appendChild(n.element),e}));e.insert(e.createPositionAt(t,0),n),e.addClass(["ck-widget_with-selection-handle"],t)}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(t,e),function(t,e){const n=new Je;n.on("change:top",(e,n)=>{n.oldDescriptor&&((t,e,n)=>{n.removeClass(en(e.classes),t)})(t,n.oldDescriptor,n.writer),n.newDescriptor&&((t,e,n)=>{n.addClass(en(e.classes),t)})(t,n.newDescriptor,n.writer)}),e.setCustomProperty("addHighlight",(t,e,i)=>n.add(e,i),t),e.setCustomProperty("removeHighlight",(t,e,i)=>n.remove(e,i),t)}(t,e),t}function Qn(t){const e=t.getCustomProperty("widgetLabel");return e?"function"==typeof e?e():e:""}function Xn(t,e){const n=t.getSelectedElement();if(n){const i=Hn(t);if(i)return e.createPositionAt(n,i);if(e.schema.isBlock(n))return e.createPositionAfter(n)}const i=t.getSelectedBlocks().next().value;if(i){if(i.isEmpty)return e.createPositionAt(i,0);const n=e.createPositionAfter(i);return t.focus.isTouching(n)?n:e.createPositionBefore(i)}return t.focus}function qn(){return null}function ti(t,e,n){return e.setCustomProperty("image",!0,t),Kn(t,e,{label:function(){const e=ri(t).getAttribute("alt");return e?`${e} ${n}`:n}})}function ei(t){const e=t.getSelectedElement();return e&&function(t){return!!t.getCustomProperty("image")&&Jn(t)}(e)?e:null}function ni(t){return!!t&&t.is("element","image")}function ii(t,e={},n=null){t.change(i=>{const s=i.createElement("image",e),r=n||Xn(t.document.selection,t);t.insertContent(s,r),s.parent&&i.setSelection(s,"on")})}function si(t){const e=t.schema,n=t.document.selection;return function(t,e,n){const i=function(t,e){const n=Xn(t,e).parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(t,n);return e.checkChild(i,"image")}(n,e,t)&&!function(t,e){const n=t.getSelectedElement();return n&&e.isObject(n)}(n,e)&&function(t){return[...t.focus.getAncestors()].every(t=>!t.is("element","image"))}(n)}function ri(t){const e=[];for(const n of t.getChildren())e.push(n),n.is("element")&&e.push(...n.getChildren());return e.find(t=>t.is("element","img"))}class oi{constructor(t){this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"}),this.listenTo(t,"change:isReadOnly",(t,e,n)=>{n?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")})}refresh(){this.isEnabled=!0}forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",ci,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",ci),this.refresh())}execute(){}destroy(){this.stopListening()}}function ci(t){t.return=!1,t.stop()}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Ve(oi,De);class hi{constructor(t,e,n){this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,Wt(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ui extends He{constructor(t){super(t),this.useCapture=!1}observe(t){("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(e=>{this.listenTo(t,e,(t,e)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(e.target)&&this.onDomEvent(e)},{useCapture:this.useCapture})})}fire(t,e,n){this.isEnabled&&this.document.fire(t,new hi(this.view,e,n))}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ai extends ui{constructor(t){super(t),this.domEventType="mousedown"}onDomEvent(t){this.fire(t.type,t)}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const li=navigator.userAgent.toLowerCase(),fi={isMac:function(t){return t.indexOf("macintosh")>-1}(li),isGecko:function(t){return!!t.match(/gecko\/\d+/)}(li),isSafari:function(t){return t.indexOf(" applewebkit/")>-1&&-1===t.indexOf("chrome")}(li),isAndroid:function(t){return t.indexOf("android")>-1}(li),isBlink:function(t){return t.indexOf("chrome/")>-1&&t.indexOf("edge/")<0}(li),features:{isRegExpUnicodePropertySupported:function(){let t=!1;try{t=0==="".search(new RegExp("[\\p{L}]","u"))}catch(e){}return t}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */()}},di={"":"ctrl","":"shift","":"alt"},bi={ctrl:"",shift:"",alt:""},wi=function(){const t={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,cmd:1114112,shift:2228224,alt:4456448};for(let e=65;e<=90;e++){t[String.fromCharCode(e).toLowerCase()]=e}for(let e=48;e<=57;e++)t[e-48]=e;for(let e=112;e<=123;e++)t["f"+(e-111)]=e;return t}();function pi(t){let e;if("string"==typeof t){if(e=wi[t.toLowerCase()],!e)throw new s("keyboard-unknown-key",null,{key:t})}else e=t.keyCode+(t.altKey?wi.alt:0)+(t.ctrlKey?wi.ctrl:0)+(t.shiftKey?wi.shift:0);return e}function vi(t){return fi.isMac?yi(t).map(t=>bi[t.toLowerCase()]||t).reduce((t,e)=>t.slice(-1)in di?t+e:t+"+"+e):t}function gi(t){return t==wi.arrowright||t==wi.arrowleft||t==wi.arrowup||t==wi.arrowdown}function mi(t,e){const n=function(t,e){const n="ltr"===e;switch(t){case wi.arrowleft:return n?"left":"right";case wi.arrowright:return n?"right":"left";case wi.arrowup:return"up";case wi.arrowdown:return"down"}}(t,e);return"down"===n||"right"===n}function yi(t){return t.split(/\s*\+\s*/)}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ji extends _n{constructor(t){super(t),this.set("text",""),this.set("position","s");const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip",e.to("position",t=>"ck-tooltip_"+t),e.if("text","ck-hidden",t=>!t.trim())]},children:[{tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:e.to("text")}]}]})}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _i extends _n{constructor(t){super(t);const e=this.bindTemplate,i=n();this.set("class"),this.set("labelStyle"),this.set("icon"),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke"),this.set("label"),this.set("tabindex",-1),this.set("tooltip"),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.tooltipView=this._createTooltipView(),this.labelView=this._createLabelView(i),this.iconView=new kn,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this)),this.setTemplate({tag:"button",attributes:{class:["ck","ck-button",e.to("class"),e.if("isEnabled","ck-disabled",t=>!t),e.if("isVisible","ck-hidden",t=>!t),e.to("isOn",t=>t?"ck-on":"ck-off"),e.if("withText","ck-button_with-text"),e.if("withKeystroke","ck-button_with-keystroke")],type:e.to("type",t=>t||"button"),tabindex:e.to("tabindex"),"aria-labelledby":"ck-editor__aria-label_"+i,"aria-disabled":e.if("isEnabled",!0,t=>!t),"aria-pressed":e.to("isOn",t=>!!this.isToggleable&&String(t))},children:this.children,on:{mousedown:e.to(t=>{t.preventDefault()}),click:e.to(t=>{this.isEnabled?this.fire("execute"):t.preventDefault()})}})}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView),this.withKeystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}_createTooltipView(){const t=new ji;return t.bind("text").to(this,"_tooltipString"),t.bind("position").to(this,"tooltipPosition"),t}_createLabelView(t){const e=new _n;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:this.bindTemplate.to("labelStyle"),id:"ck-editor__aria-label_"+t},children:[{text:this.bindTemplate.to("label")}]}),e}_createKeystrokeView(){const t=new _n;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>vi(t))}]}),t}_getTooltipString(t,e,n){return t?"string"==typeof t?t:(n&&(n=vi(n)),t instanceof Function?t(e,n):`${e}${n?` (${n})`:""}`):""}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ki({emitter:t,activator:e,callback:n,contextElements:i}){t.listenTo(document,"mousedown",(t,s)=>{if(!e())return;const r="function"==typeof s.composedPath?s.composedPath():[];for(const e of i)if(e.contains(s.target)||r.includes(e))return;n()})}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xi{constructor(){this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set,this._nextEventLoopTimeout=null}add(t){if(this._elements.has(t))throw new s("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",()=>this._focus(t),{useCapture:!0}),this.listenTo(t,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(t)}remove(t){t===this.focusedElement&&this._blur(t),this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t))}destroy(){this.stopListening()}_focus(t){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=t,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}Ve(xi,Ye),Ve(xi,De);
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
class Ai{constructor(){this._listener=Object.create(Ye)}listenTo(t){this._listener.listenTo(t,"keydown",(t,e)=>{this._listener.fire("_keydown:"+pi(e),e)})}set(t,e,n={}){const i=function(t){return"string"==typeof t&&(t=yi(t)),t.map(t=>"string"==typeof t?pi(t):t).reduce((t,e)=>e+t,0)}(t);this._listener.listenTo(this._listener,"_keydown:"+i,(t,n)=>{e(n,()=>{n.preventDefault(),n.stopPropagation(),t.stop()}),t.return=!0},{priority:n.priority})}press(t){return!!this._listener.fire("_keydown:"+pi(t),t)}destroy(){this._listener.stopListening()}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mi extends _n{constructor(t,e,n){super(t);const i=this.bindTemplate;this.buttonView=e,this.panelView=n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class"),this.set("id"),this.set("panelPosition","auto"),this.keystrokes=new Ai,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",i.to("class"),i.if("isEnabled","ck-disabled",t=>!t)],id:i.to("id"),"aria-describedby":i.to("ariaDescribedById")},children:[e,n]}),e.extendTemplate({attributes:{class:["ck-dropdown__button"]}})}render(){super.render(),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",()=>{this.isOpen&&(this.panelView.position="auto"===this.panelPosition?Mi._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions}).name:this.panelPosition)}),this.keystrokes.listenTo(this.element);const t=(t,e)=>{this.isOpen&&(this.buttonView.focus(),this.isOpen=!1,e())};this.keystrokes.set("arrowdown",(t,e)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,e())}),this.keystrokes.set("arrowright",(t,e)=>{this.isOpen&&e()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:t,north:e,southEast:n,southWest:i,northEast:s,northWest:r,southMiddleEast:o,southMiddleWest:c,northMiddleEast:h,northMiddleWest:u}=Mi.defaultPanelPositions;return"rtl"!==this.locale.uiLanguageDirection?[n,i,o,c,t,s,r,h,u,e]:[i,n,c,o,t,r,s,u,h,e]}}Mi.defaultPanelPositions={south:(t,e)=>({top:t.bottom,left:t.left-(e.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,e)=>({top:t.bottom,left:t.left-e.width+t.width,name:"sw"}),southMiddleEast:(t,e)=>({top:t.bottom,left:t.left-(e.width-t.width)/4,name:"sme"}),southMiddleWest:(t,e)=>({top:t.bottom,left:t.left-3*(e.width-t.width)/4,name:"smw"}),north:(t,e)=>({top:t.top-e.height,left:t.left-(e.width-t.width)/2,name:"n"}),northEast:(t,e)=>({top:t.top-e.height,left:t.left,name:"ne"}),northWest:(t,e)=>({top:t.top-e.height,left:t.left-e.width+t.width,name:"nw"}),northMiddleEast:(t,e)=>({top:t.top-e.height,left:t.left-(e.width-t.width)/4,name:"nme"}),northMiddleWest:(t,e)=>({top:t.top-e.height,left:t.left-3*(e.width-t.width)/4,name:"nmw"})},Mi._getOptimalPosition=In;
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
class Ei{constructor(t){if(Object.assign(this,t),t.actions&&t.keystrokeHandler)for(const e in t.actions){let n=t.actions[e];"string"==typeof n&&(n=[n]);for(const i of n)t.keystrokeHandler.set(i,(t,n)=>{this[e](),n()})}}get first(){return this.focusables.find(Oi)||null}get last(){return this.focusables.filter(Oi).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let t=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((e,n)=>{const i=e.element===this.focusTracker.focusedElement;return i&&(t=n),i}),t)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(t){t&&t.focus()}_getFocusableItem(t){const e=this.current,n=this.focusables.length;if(!n)return null;if(null===e)return this[1===t?"first":"last"];let i=(e+n+t)%n;do{const e=this.focusables.get(i);if(Oi(e))return e;i=(i+n+t)%n}while(i!==e);return null}}function Oi(t){return!(!t.focus||"none"==Nn.window.getComputedStyle(t.element).display)}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Ve(class{constructor(t){this._callback=t,this._elements=new Set,this._previousRects=new Map,this._periodicCheckTimeout=null}observe(t){this._elements.add(t),this._checkElementRectsAndExecuteCallback(),1===this._elements.size&&this._startPeriodicCheck()}unobserve(t){this._elements.delete(t),this._previousRects.delete(t),this._elements.size||this._stopPeriodicCheck()}_startPeriodicCheck(){const t=()=>{this._checkElementRectsAndExecuteCallback(),this._periodicCheckTimeout=setTimeout(t,100)};this.listenTo(Nn.window,"resize",()=>{this._checkElementRectsAndExecuteCallback()}),this._periodicCheckTimeout=setTimeout(t,100)}_stopPeriodicCheck(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear()}_checkElementRectsAndExecuteCallback(){const t=[];for(const e of this._elements)this._hasRectChanged(e)&&t.push({target:e,contentRect:this._previousRects.get(e)});t.length&&this._callback(t)}_hasRectChanged(t){if(!t.ownerDocument.body.contains(t))return!1;const e=new En(t),n=this._previousRects.get(t),i=!n||!n.isEqual(e);return this._previousRects.set(t,e),i}},Ye);export{ei as A,_i as B,oi as C,ki as D,M as E,xi as F,A as G,O as H,Ze as I,v as J,Ai as K,kn as L,ai as M,Mi as N,Wt as O,Re as P,Ve as Q,En as R,De as S,Un as T,qe as U,_n as V,Zn as W,Ye as X,Nn as Y,ii as a,ti as b,pi as c,Hn as d,$n as e,gi as f,ri as g,Yn as h,si as i,zn as j,Gn as k,mi as l,wi as m,nn as n,Jn as o,i as p,Qn as q,fi as r,ni as s,en as t,n as u,tn as v,Ei as w,Ln as x,s as y,Cn as z}