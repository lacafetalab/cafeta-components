import{r as i,c as t,h as s,H as e}from"./p-b447a3c4.js";const n=class{constructor(s){i(this,s),this.changeChoice=t(this,"changeChoice",7),this._choices=[],this.isOpenDropdown=!1,this.thereIsLowerSpace=!1,this.positionOptionstop=!1,this.valueInput="",this.hideItemsIfSelected=!1,this.label="",this.error=!1,this.disabled=!1,this.fieldReadonly=!1,this.placeholder="",this.name="",this.currentValue="",this.iconName="chevron-down",this.color="primary",this.border=!0,this.bgField="",this.loader=!1,this.autocomplete=!1,this.IconRotate=!0,this.focusInput=()=>{this.inputEl.focus()},this.handleOptionClick=i=>{if(this.handleHideOptions(),!this.validateIfTheNewOptionSelectedIsDifferentFromThePrevious(i)){this.clearChoices();const t=[...this._choices];t.filter(t=>t.value===i)[0].selected=!0,this._choices=[...t];const s=this._choices.filter(t=>t.value===i)[0];this.autocomplete&&(this.valueInput=s.label),this.changeChoice.emit(s.value)}},this.placeholderSelected=()=>{this.clearChoices(),this.handleHideOptions(),this.changeChoice.emit(null)},this.filteredChoices=()=>this.valueInput.length?this._choices.filter(i=>{if(!i.selected){const t=i.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),s=this.valueInput.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return t.includes(s)}}):this._choices,this.handleShowOptions=()=>{this.isOpenDropdown=!0},this.handleHideOptions=()=>{this.isOpenDropdown=!1},this.closeDroprownIfClickOutDropdown=i=>{if(!this.singleFileInput.contains(i.target))return this.handleHideOptions()},this.getHeigthWrapperOptions=()=>this.dropdownItems.getBoundingClientRect().height,this.observerListItems=()=>{this.observerItems=new MutationObserver(i=>{i.forEach(i=>{"attributes"===i.type&&(this.calculatePositionOfOptions(),this.autocomplete&&this.focusInput())})}),this.observerItems.observe(this.dropdownItems,{attributes:!0,childList:!1,characterData:!1})},this.calculatePositionOfOptions=()=>{if(this.isOpenDropdown){const i=this.singleFileInput,t=this.dropdownItems,s=document.body.getBoundingClientRect().height,e=t.getBoundingClientRect().height,n=i.getBoundingClientRect().height,l=i.getBoundingClientRect().top;return this.positionOptionstop=s<l+n+8+e}this.positionOptionstop=!1},this.validateDisabled=()=>{!this.disabled&&this.handleToogleOptions()}}setChoices(i,t){const s=JSON.stringify(i);s!==JSON.stringify(t)&&(this._choices=JSON.parse(s))}clearChoices(){const i=[...this._choices];i.map(i=>i.selected=!1),this._choices=i}knowIfThereIsAnItemSelected(){return this._choices.filter(i=>!0===i.selected).length>0}validateIfTheNewOptionSelectedIsDifferentFromThePrevious(i){return!!this.knowIfThereIsAnItemSelected()&&this._choices.filter(i=>i.selected)[0].value===i}handleToogleOptions(){this.isOpenDropdown=!this.isOpenDropdown,this.calculatePositionOfOptions()}setInputValue(i){this.valueInput=i,this.valueInput.length&&this.handleShowOptions()}componentWillLoad(){this._choices=JSON.parse(JSON.stringify(this.choices)),document.addEventListener("click",this.closeDroprownIfClickOutDropdown)}componentDidLoad(){this.observerListItems()}componentDidUnload(){this.observerItems&&this.observerItems.disconnect(),document.removeEventListener("click",this.closeDroprownIfClickOutDropdown)}render(){const i={disabled:this.disabled,loader:this.loader,fieldReadonly:this.fieldReadonly,color:this.color,error:this.error,border:this.border,bgField:this.bgField,isActive:this.isOpenDropdown,IconRotate:this.IconRotate,iconName:this.iconName,helperText:this.helperText};return s(e,{"data-testid":"cc-single-file-input",class:"single-file-input"},this.label&&s("span",{class:"single-file-input__label"},this.label),s("cc-wrapper-field",Object.assign({ref:i=>this.singleFileInput=i,class:{"single-file-input__wrapper":!0,"single-file-input--is-collapse":this.isOpenDropdown}},i),s("div",{class:"single-file-input__field",onClick:this.validateDisabled},!this.autocomplete&&s("p",{class:{"single-file-input__placeholder":!0,"single-file-input__placeholder--is-hidden":this.knowIfThereIsAnItemSelected()}},this.placeholder),this.autocomplete&&s("cc-input",{bgField:"bg-transparent",value:this.valueInput,placeholder:this.placeholder,border:!1,ref:i=>this.inputEl=i,onInput:i=>{var t;return this.setInputValue(null===(t=i.target)||void 0===t?void 0:t.value)}}),!this.autocomplete&&this._choices.filter(i=>i.selected).map(i=>s("p",{class:"single-file-input__field-option--is-selected"},i.label))),s("ul",{ref:i=>this.dropdownItems=i,class:{"single-file-input__options":!0,"single-file-input__options--is-active":this.isOpenDropdown,"single-file-input__options--top":this.positionOptionstop}},!this.autocomplete&&this.placeholder&&s("li",{class:{"single-file-input__placeholder":!0,"single-file-input__option":!0,"single-file-input__option--is-selected":!this.knowIfThereIsAnItemSelected()},onClick:this.placeholderSelected},this.placeholder),this.autocomplete&&this.filteredChoices().length>0?this.filteredChoices().map(i=>s("li",{onClick:()=>!i.disabled&&this.handleOptionClick(i.value),class:{"single-file-input__option":!0,"single-file-input__option--is-selected":i.selected,"single-file-input__option--is-disabled":i.disabled}},i.label)):this.autocomplete&&0===this.filteredChoices().length&&s("li",{class:"single-file-input__option"},"No se encontraron los resultados"),!this.autocomplete&&this._choices.map(i=>s("li",{onClick:()=>!i.disabled&&this.handleOptionClick(i.value),class:{"single-file-input__option":!0,"single-file-input__option--is-selected":i.selected,"single-file-input__option--is-disabled":i.disabled,"single-file-input__option--is-hidden":this.hideItemsIfSelected&&i.invisible}},i.label," ",i.labelInfo&&s("span",null,i.labelInfo))))))}static get watchers(){return{choices:["setChoices"]}}};n.style="*{-webkit-box-sizing:border-box;box-sizing:border-box}.single-file-input__wrapper-icon{position:absolute;right:8px;bottom:8px;max-height:2.4rem}.single-file-input__field{padding-top:0.8rem;padding-bottom:0.8rem;padding-left:1.6rem;padding-right:1.6rem;padding-right:40px;min-height:40px}.single-file-input__field-option{margin:0;padding:0;display:none;visibility:hidden;color:var(--neutral-03);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.single-file-input__field-option--is-selected{display:block;visibility:visible}.single-file-input__field input{padding:0}.single-file-input__placeholder{color:var(--neutral-02);display:block;visibility:visible;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.single-file-input__placeholder--is-hidden{display:none;visibility:hidden}.single-file-input__options{position:absolute;width:100%;background-color:var(--neutral-04);border-radius:0.4rem;overflow:auto;padding:0;margin:0;left:0;top:calc(100% + 8px);-webkit-box-shadow:0 4px 16px -8px rgba(0, 0, 0, 0.5);box-shadow:0 4px 16px -8px rgba(0, 0, 0, 0.5);max-height:208px;display:none;z-index:1}.single-file-input__options--is-active{display:block}.single-file-input__options--top{bottom:calc(100% + 8px);top:auto}.single-file-input__option{min-height:40px;font-size:14px;line-height:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:10px 1.6rem;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between}.single-file-input__option span{margin-left:12px}.single-file-input__option:hover{background-color:var(--background-01)}.single-file-input__option--is-selected{background-color:var(--background-02);color:var(--neutral-03);font-weight:700;-webkit-transition-property:all;transition-property:all}.single-file-input__option--is-selected:hover{background-color:var(--background-02)}.single-file-input__option--is-disabled{color:var(--disabled-text)}.single-file-input__option--is-disabled:hover{cursor:not-allowed;background:transparent}.single-file-input__option--is-hidden{display:none}.single-file-input__label{padding-top:0.4rem;padding-bottom:0.4rem;font-size:1.1rem;font-weight:900;color:var(--neutral-03);display:block}";export{n as cc_single_select_input}